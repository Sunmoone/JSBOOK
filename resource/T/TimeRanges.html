<div id="content" class="content mod-cs-content text-content clearfix"> <p>&lt;audio&gt; 标签属性：src：音乐的URLpreload：预加载autoplay：自动播放loop：循环播放controls：浏览器自带的控制条 </p>1&lt;<strong>audio</strong>id="media"src="<a href="http://www.abc.com/test.mp3">http://www.abc.com/test.mp3</a>"controls&gt;&lt;/<strong>audio</strong>&gt;<p>&lt;video&gt; 标签属性：src：视频的URLposter：视频封面，没有播放时显示的图片preload：预加载autoplay：自动播放loop：循环播放controls：浏览器自带的控制条width：视频宽度height：视频高度 </p>1&lt;<strong>video</strong>id="media"src="<a href="http://www.abc.com/test.mp4">http://www.abc.com/test.mp4</a>"controls width="400px"heigt="400px"&gt;&lt;/<strong>video</strong>&gt;<p>获取HTMLVideoElement和HTMLAudioElement对象 </p>1//audio可以直接通过new创建对象2Media = <strong>new</strong>Audio("<a href="http://www.abc.com/test.mp3">http://www.abc.com/test.mp3</a>"); 3//audio和video都可以通过标签获取对象4Media = document.getElementById("media");<p>Media方法和属性： </p><p>HTMLVideoElement 和 HTMLAudioElement 均继承自 HTMLMediaElement</p>01//错误状态02Media.error; //null:正常03Media.error.code; //1.用户终止 2.网络错误 3.解码错误 4.URL无效04//网络状态05Media.currentSrc; //返回当前资源的URL06Media.src = value; //返回或设置当前资源的URL07Media.canPlayType(type); //是否能播放某种格式的资源08Media.networkState; //0.此元素未初始化&nbsp; 1.正常但没有使用网络&nbsp; 2.正在下载数据&nbsp; 3.没有找到资源09Media.load(); //重新加载src指定的资源10Media.buffered; //返回已缓冲区域，TimeRanges11Media.preload; //none:不预载 metadata:预载资源信息 auto:12//准备状态13Media.readyState;&nbsp;&nbsp; //1:HAVE_NOTHING 2:HAVE_METADATA 3.HAVE_CURRENT_DATA 4.HAVE_FUTURE_DATA 5.HAVE_ENOUGH_DATA14Media.seeking; //是否正在seeking15//回放状态16Media.currentTime = value; //当前播放的位置，赋值可改变位置17Media.startTime; //一般为0，如果为流媒体或者不从0开始的资源，则不为018Media.duration; //当前资源长度 流返回无限19Media.paused; //是否暂停20Media.defaultPlaybackRate = value;//默认的回放速度，可以设置21Media.playbackRate = value;//当前播放速度，设置后马上改变22Media.played; //返回已经播放的区域，TimeRanges，关于此对象见下文23Media.seekable; //返回可以seek的区域 TimeRanges24Media.ended;&nbsp;&nbsp;&nbsp; //是否结束25Media.autoPlay; //是否自动播放26Media.loop; //是否循环播放27Media.play();&nbsp;&nbsp; //播放28Media.pause();&nbsp; //暂停29//控制30Media.controls;//是否有默认控制条31Media.volume = value; //音量32Media.muted = value; //静音33//TimeRanges(区域)对象34TimeRanges.length; //区域段数35TimeRanges.start(index) //第index段区域的开始位置36TimeRanges.end(index) //第index段区域的结束位置<p>事件： </p>01eventTester = <strong>function</strong>(e){ 02&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Media.addEventListener(e,<strong>function</strong>(){ 03&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log((<strong>new</strong>Date()).getTime(),e); 04&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}); 05&nbsp;&nbsp;&nbsp;&nbsp;} 06&nbsp;&nbsp;07&nbsp;&nbsp;&nbsp;&nbsp;eventTester("loadstart");&nbsp;&nbsp; //客户端开始请求数据08&nbsp;&nbsp;&nbsp;&nbsp;eventTester("progress");&nbsp;&nbsp;&nbsp; //客户端正在请求数据09&nbsp;&nbsp;&nbsp;&nbsp;eventTester("suspend");&nbsp;&nbsp;&nbsp;&nbsp; //延迟下载10&nbsp;&nbsp;&nbsp;&nbsp;eventTester("abort");&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //客户端主动终止下载（不是因为错误引起），11&nbsp;&nbsp;&nbsp;&nbsp;eventTester("error");&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //请求数据时遇到错误12&nbsp;&nbsp;&nbsp;&nbsp;eventTester("stalled");&nbsp;&nbsp;&nbsp;&nbsp; //网速失速13&nbsp;&nbsp;&nbsp;&nbsp;eventTester("play");&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //play()和autoplay开始播放时触发14&nbsp;&nbsp;&nbsp;&nbsp;eventTester("pause");&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //pause()触发15&nbsp;&nbsp;&nbsp;&nbsp;eventTester("loadedmetadata");&nbsp; //成功获取资源长度16&nbsp;&nbsp;&nbsp;&nbsp;eventTester("loadeddata");&nbsp; //17&nbsp;&nbsp;&nbsp;&nbsp;eventTester("waiting");&nbsp;&nbsp;&nbsp;&nbsp; //等待数据，并非错误18&nbsp;&nbsp;&nbsp;&nbsp;eventTester("playing");&nbsp;&nbsp;&nbsp;&nbsp; //开始回放19&nbsp;&nbsp;&nbsp;&nbsp;eventTester("canplay");&nbsp;&nbsp;&nbsp;&nbsp; //可以播放，但中途可能因为加载而暂停20&nbsp;&nbsp;&nbsp;&nbsp;eventTester("canplaythrough"); //可以播放，歌曲全部加载完毕21&nbsp;&nbsp;&nbsp;&nbsp;eventTester("seeking");&nbsp;&nbsp;&nbsp;&nbsp; //寻找中22&nbsp;&nbsp;&nbsp;&nbsp;eventTester("seeked");&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //寻找完毕23&nbsp;&nbsp;&nbsp;&nbsp;eventTester("timeupdate");&nbsp; //播放时间改变24&nbsp;&nbsp;&nbsp;&nbsp;eventTester("ended");&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //播放结束25&nbsp;&nbsp;&nbsp;&nbsp;eventTester("ratechange");&nbsp; //播放速率改变26&nbsp;&nbsp;&nbsp;&nbsp;eventTester("durationchange");&nbsp; //资源长度改变27&nbsp;&nbsp;&nbsp;&nbsp;eventTester("volumechange");&nbsp;&nbsp;&nbsp; //音量改变 </div>


<div class="_content"><div class="_page _mdn"><h1>TimeRanges</h1>  <p>The <code>TimeRanges</code> interface is used to represent a set of time ranges, primarily for the purpose of tracking which portions of media have been buffered when loading it for use by the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/audio" title="The HTML &lt;audio&gt; element is used to represents sound content in documents. Added as part of HTML5, it may contain several audio sources, represented using the src attribute or the &lt;source&gt; element; the browser will choose the most suitable one. Fallback content for browser not supporting the &lt;audio&gt; element can be added too."><code>&lt;audio&gt;</code></a> and <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video" title="The HTML &lt;video&gt; element is used to embed video content in an HTML or XHTML document."><code>&lt;video&gt;</code></a> elements.</p> <p>A <code>TimeRanges</code> object includes one or more ranges of time, each specified by a starting and ending time offset. You reference each time range by using the <code>start()</code> and <code>end()</code> methods, passing the index number of the time range you want to retrieve.</p> <p>The term "<a class="external" href="http://www.w3.org/TR/html5/the-iframe-element.html#normalized-timeranges-object" title="http://www.w3.org/TR/html5/the-iframe-element.html#normalized-timeranges-object">normalized TimeRanges object</a>" indicates that ranges in such an object are ordered, don't overlap, aren't empty, and don't touch (adjacent ranges are folded into one bigger range).</p> <h3 id="Properties" name="Properties">Properties</h3> <table class="standard-table"><tbody>
<tr>
<th>Name</th> <th>Description</th> <th>Return Type</th> <th>Availability</th> </tr>
<tr>
<td><a href="timeranges.length" title="En/DOM/TimeRanges.length"><code>TimeRanges.length</code></a></td> <td>The number of time ranges represented by the time range object. <strong>Read only.</strong>
</td> <td> <p>unsigned long</p> </td> <td>?</td> </tr>
</tbody></table><h3 id="Methods" name="Methods">Methods</h3> <dl>
<dt> <a href="timeranges.start" title="Returns the time offset at which a specified time range begins."><code>TimeRanges.start</code></a>
</dt> <dd> Returns the time for the start of the range with the specified index.</dd> <dt> <a href="timeranges.end" title="Returns the time offset at which a specified time range ends."><code>TimeRanges.end</code></a>
</dt> <dd> Returns the time for the end of the specified range.</dd> </dl><h3 id="Specification">Specification</h3> <ul>
<li><a class="external" href="http://www.whatwg.org/specs/web-apps/current-work/#timeranges" title="http://www.whatwg.org/specs/web-apps/current-work/#timeranges">WHATWG Working Draft</a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/TimeRanges$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2013 Mozilla Contributors<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/TimeRanges" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/TimeRanges</a>
  </p>
</div>
</div></div>