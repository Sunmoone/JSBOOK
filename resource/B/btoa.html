
    <p>DOM 参考


    </p>

    <h3>概述</h3>
    <p>将ascii字符串或二进制数据转换成一个base64编码过的字符串,该方法不能直接作用于Unicode字符串.</p>
    <h3>语法</h3>
<pre>
    var encodedData = window.btoa(<em>stringToEncode</em>);
</pre>
    <h3>例子</h3>
<pre class="eval language-html">
    var encodedData = window.btoa("Hello, world"); // 编码
    var decodedData = window.atob(encodedData); // 解码
</pre>
    <h3>备注</h3>
    <p>
        由于一些网络通讯协议的限制,你必须使用该方法对原数据进行编码后,才能进行发送.接收方使用相当于
        window.atob的方法对接受到的base64数据进行解码,得到原数据.例如, 发送某些含有ASCII码表中0到31之间的控制字符的数据.
    </p>
    <p>在用javascript编写XPCOM组件时,
        <code>btoa()方法也是可用的,虽然</code>
        全局对象已经不是 window 了.
    </p>
    <h3>Unicode 字符串</h3>
    <p>在各浏览器中,使用 <code>window.btoa</code> 对Unicode字符串进行编码都会触发一个字符越界的异常.</p>
    <p>
        先把Unicode字符串转换为UTF-8编码,可以解决这个问题
    </p>
<pre>
    function utf8_to_b64( str&nbsp;)&nbsp;{
    return window.btoa(unescape(encodeURIComponent( str&nbsp;)));
}

function b64_to_utf8(&nbsp;str )&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;return decodeURIComponent(escape(window.atob( str )));
}

// Usage:
utf8_to_b64('? à la mode'); // "4pyTIMOgIGxhIG1vZGU="
b64_to_utf8('4pyTIMOgIGxhIG1vZGU='); //&nbsp;"? à la mode"
//译者注:在js引擎内部,encodeURIComponent(str)相当于escape(unicodeToUTF8(str))
//所以可以推导出unicodeToUTF8(str)等同于unescape(encodeURIComponent(str))
</pre>
    <h3>规范</h3>
    <p>DOM Level 0 不属于任何标准.</p>
    <h3>浏览器兼容性</h3>
    <p></p><div>
    <a></a>
    <ul>
        <li><a>Desktop</a></li>
        <li><a>Mobile</a></li>
    </ul>
    <div style="display: block;">
        <table class="compat-table">
            <tbody>
            <tr>
                <th>Feature</th>
                <th>Chrome</th>
                <th>Firefox (Gecko)</th>
                <th>Internet Explorer</th>
                <th>Opera</th>
                <th>Safari (WebKit)</th>
            </tr>
            <tr>
                <td>Basic support</td>
                <td><span style="color: #888;">(Yes)</span></td>
                <td><span style="color: #888;">(Yes)</span></td>
                <td>10+</td>
                <td><span style="color: #888;">(Yes)</span></td>
                <td><span style="color: #888;">(Yes)</span></td>
            </tr>
            </tbody>
        </table>
    </div><div id="compat-mobile" style="display: none;">
    <table class="compat-table">
        <tbody>
        <tr>
            <th>Feature</th>
            <th>Android</th>
            <th>Firefox Mobile (Gecko)</th>
            <th>IE&nbsp;Phone</th>
            <th>Opera Mobile</th>
            <th>Safari Mobile</th>
        </tr>
        <tr>
            <td>Basic support</td>
            <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
            <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
            <td><span style="color: #f00;">Not supported</span></td>
            <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
            <td><span style="color: #888;" title="Please update this with the earliest version of support.">(Yes)</span></td>
        </tr>
        </tbody>                                           <article id="wikiArticle">
                                          <p><span class="breadcrumbs domRef_breadcrumbs themeUpdated">«&nbsp;<a href="/zh-CN/docs/Gecko_DOM_Reference">DOM 参考</a></span>


</p><section class="Quick_links" id="Quick_Links"><!-- --></section><p></p>
<h3 id="Summary" name="Summary">概述</h3>
<p>将ascii字符串或二进制数据转换成一个base64编码过的字符串,该方法不能直接作用于Unicode字符串.</p>
<h3 id="Syntax" name="Syntax">语法</h3>
<pre class="eval language-html">var encodedData = window.btoa(<em>stringToEncode</em>);
</pre>
<h3 id="Example" name="Example">例子</h3>
<pre class="eval language-html">var encodedData = window.btoa("Hello, world"); // 编码
var decodedData = window.atob(encodedData); // 解码
</pre>
<h3 id="Notes" name="Notes">备注</h3>
<p>由于一些网络通讯协议的限制,你必须使用该方法对原数据进行编码后,才能进行发送.接收方使用相当于 <a href="/zh-cn/DOM/window.atob" title="zh-cn/DOM/window.atob">window.atob</a> 的方法对接受到的base64数据进行解码,得到原数据.例如, 发送某些含有ASCII码表中0到31之间的控制字符的数据.</p>
<p>在用javascript编写XPCOM组件时, <code>btoa()方法也是可用的,虽然</code>全局对象已经不是 <code><a href="/zh-cn/DOM/window" title="zh-cn/DOM/window">window</a></code> 了.</p>
<h3 id="Unicode_.E5.AD.97.E7.AC.A6.E4.B8.B2">Unicode 字符串</h3>
<p>在各浏览器中,使用 <code>window.btoa</code> 对Unicode字符串进行编码都会触发一个字符越界的异常.</p>
<p>先把Unicode字符串转换为UTF-8编码,可以解决这个问题, 代码来自<a class="external" href="http://ecmanaut.blogspot.com/2006/07/encoding-decoding-utf8-in-javascript.html" title="http://ecmanaut.blogspot.com/2006/07/encoding-decoding-utf8-in-javascript.html">Johan Sundstr?m</a>:</p>
<pre class="language-html">function utf8_to_b64( str&nbsp;)&nbsp;{
    return window.btoa(unescape(encodeURIComponent( str&nbsp;)));
}

function b64_to_utf8(&nbsp;str )&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;return decodeURIComponent(escape(window.atob( str )));
}

// Usage:
utf8_to_b64('? à la mode'); // "4pyTIMOgIGxhIG1vZGU="
b64_to_utf8('4pyTIMOgIGxhIG1vZGU='); //&nbsp;"? à la mode"
//译者注:在js引擎内部,encodeURIComponent(str)相当于escape(unicodeToUTF8(str))
//所以可以推导出unicodeToUTF8(str)等同于unescape(encodeURIComponent(str))
</pre>
<h3 id="Specification" name="Specification">规范</h3>
<p>DOM Level 0 不属于任何标准.</p>
<h3 id="Browser_Compatibility" name="Browser_Compatibility">浏览器兼容性</h3>
<p></p><div class="htab">
    <a id="AutoCompatibilityTable" name="AutoCompatibilityTable"></a>
    <ul>
        <li class="selected"><a>Desktop</a></li>
        <li><a>Mobile</a></li>
    </ul>
<div id="compat-desktop" style="display: block;">
 <table class="compat-table">
  <tbody>
   <tr>
    <th>Feature</th>
    <th>Chrome</th>
    <th>Firefox (Gecko)</th>
    <th>Internet Explorer</th>
    <th>Opera</th>
    <th>Safari (WebKit)</th>
   </tr>
   <tr>
    <td>Basic support</td>
    <td><span style="color: #888;" title="Please update this with the earliest version of support.">(Yes)</span></td>
    <td><span style="color: #888;" title="Please update this with the earliest version of support.">(Yes)</span></td>
    <td>10+</td>
    <td><span style="color: #888;" title="Please update this with the earliest version of support.">(Yes)</span></td>
    <td><span style="color: #888;" title="Please update this with the earliest version of support.">(Yes)</span></td>
   </tr>
  </tbody>
 </table>
</div><div id="compat-mobile" style="display: none;">
 <table class="compat-table">
  <tbody>
   <tr>
    <th>Feature</th>
    <th>Android</th>
    <th>Firefox Mobile (Gecko)</th>
    <th>IE&nbsp;Phone</th>
    <th>Opera Mobile</th>
    <th>Safari Mobile</th>
   </tr>
   <tr>
    <td>Basic support</td>
    <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
    <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
    <td><span style="color: #f00;">Not supported</span></td>
    <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td>
    <td><span style="color: #888;" title="Please update this with the earliest version of support.">(Yes)</span></td>
   </tr>
  </tbody>
 </table>
</div></div><p></p>


<h3 id="See_also" name="See_also">相关链接</h3>
<p><a href="/zh-cn/DOM/window.atob" title="zh-cn/DOM/window.atob">atob</a></p>
<p></p>
                                    </article>
    </table>
</div></div>
