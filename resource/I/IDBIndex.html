<div class="_content"><div class="_page _mdn"><h1>IDBIndex</h1> <div class="summary"> <p>The <strong><code>IDBIndex</code></strong> interface of the <a href="https://developer.mozilla.org/en/IndexedDB" title="en/IndexedDB">IndexedDB API</a> provides asynchronous access to an <a href="https://developer.mozilla.org/en/IndexedDB/Basic_Concepts_Behind_IndexedDB#gloss_index" title="en/IndexedDB/Basic_Concepts_Behind_IndexedDB#gloss_index">index</a> in a database. An index is a kind of object store for looking up records in another object store, called the <em>referenced object store</em>. You use this interface to retrieve data.</p> </div> <p>You can retrieve records in an object store through their keys or by using an index (cursors provide a third way: see <a href="idbcursor" title="The cursor has a source that indicates which index or object store it is iterating. It has a position within the range, and moves in a direction that is increasing or decreasing in the order of record keys. The cursor enables an application to asynchronously process all the records in the cursor's range."><code>IDBCursor</code></a>). An index lets you look up records in an object store using properties of the values in the object stores records.</p> <p>The index is a persistent key-value storage where the value part of its records is the key part of a record in the referenced object store. The records in an index are automatically populated whenever records in the referenced object store are inserted, updated, or deleted. Each record in an index can point to only one record in its referenced object store, but several indexes can reference the same object store. When the object store changes, all indexes that refers to the object store are automatically updated.</p> <p>The records in an index are always sorted according to the records key. However, unlike object stores, a given index can contain multiple records with the same key. Such records are further sorted according to primary key in the referenced object store.</p> <p>You can grab a set of keys within a range. To learn more, see <a href="idbkeyrange" title="A key range can have a single value or a range with upper and lower bounds or endpoints. If the key range has both upper and lower bounds, then it is bounded; if it has no bounds, it is unbounded. A bounded key range can either be open (the endpoints are excluded) or closed (the endpoints are included). To retrieve all keys within a certain range, you can use the following code constructs:"><code>IDBKeyRange</code></a>.</p> <h2 id="Methods">Methods</h2> <p>Inherits from: <a href="eventtarget" title="en/DOM/EventTarget">EventTarget</a></p> <dl>
<dt> <a href="idbindex.count" title="If you want to see how many records are between keys 1 and 1000 in an object store, you can write the following:"><code>IDBIndex.count</code></a>
</dt> <dd> Returns an <a href="idbrequest" title="The request object does not initially contain any information about the result of the operation, but once information becomes available, an event is fired on the request, and the information becomes available through the properties of the IDBRequest instance."><code>IDBRequest</code></a> object, and in a separate thread, returns the number of records within a key range.</dd> <dt> <a href="idbindex.get" title="If a value is successfully found, then a structured clone of it is created and set as the result of the request object."><code>IDBIndex.get</code></a>
</dt> <dd> Returns an <a href="idbrequest" title="The request object does not initially contain any information about the result of the operation, but once information becomes available, an event is fired on the request, and the information becomes available through the properties of the IDBRequest instance."><code>IDBRequest</code></a> object, and, in a separate thread, finds either the value in the referenced object store that corresponds to the given key or the first corresponding value, if <code>key</code> is a key range.</dd> <dt> <a href="idbindex.getall" title="There is a performance cost associated with looking at the value property of a cursor, because the object is created lazily. When you use getAll() for example, Gecko must create all the objects at once. If you're just interested in looking at each of the keys, for instance, it is much more efficient to use a cursor than to use getAll(). If you're trying to get an array of all the objects in an object store, though, use getAll()."><code>IDBIndex.getAll</code></a> <span class="badge nonstandardBadge" title="This API has not been standardized."><span class="badgeText">Non-standard</span></span>
</dt> <dd> Instantly retrieves all objects inside an <a href="idbobjectstore" title="To learn more about various topics, see the following"><code>IDBObjectStore</code></a>, setting them as the <code>result</code> of the request object.</dd> <dt> <a href="idbindex.getkey" title="If a key is successfully found it is set as the result of the request object."><code>IDBIndex.getKey</code></a>
</dt> <dd> Returns an <a href="idbrequest" title="The request object does not initially contain any information about the result of the operation, but once information becomes available, an event is fired on the request, and the information becomes available through the properties of the IDBRequest instance."><code>IDBRequest</code></a> object, and, in a separate thread, finds either the given key or the primary key, if <code>key</code> is a key range.</dd> <dt> <a href="idbindex.getallkeys" title="This method may raise a DOMException with a DOMError of the following types:"><code>IDBIndex.getAllKeys</code></a> <span class="badge nonstandardBadge" title="This API has not been standardized."><span class="badgeText">Non-standard</span></span>
</dt> <dd> Instantly retrieves the keys of all objects inside an <a href="idbobjectstore" title="To learn more about various topics, see the following"><code>IDBObjectStore</code></a>, setting them as the <code><a href="https://developer.mozilla.org/en/IndexedDB/IDBRequest#attr_result" title="en/IndexedDB/IDBRequest#attr result">result</a></code> of the request object.</dd> <dt> <a href="idbindex.opencursor" title="The method sets the position of the cursor to the appropriate record, based on the specified direction."><code>IDBIndex.openCursor</code></a>
</dt> <dd> Returns an <a href="idbrequest" title="The request object does not initially contain any information about the result of the operation, but once information becomes available, an event is fired on the request, and the information becomes available through the properties of the IDBRequest instance."><code>IDBRequest</code></a> object, and, in a separate thread, creates a <a href="https://developer.mozilla.org/en/IndexedDB#gloss_cursor" title="en/IndexedDB#gloss cursor">cursor</a> over the specified key range.</dd> <dt> <a href="idbindex.openkeycursor" title="The method sets the position of the cursor to the appropriate key, based on the specified direction."><code>IDBIndex.openKeyCursor</code></a> <span class="badge nonstandardBadge" title="This API has not been standardized."><span class="badgeText">Non-standard</span></span>
</dt> <dd> Returns an <a href="idbrequest" title="The request object does not initially contain any information about the result of the operation, but once information becomes available, an event is fired on the request, and the information becomes available through the properties of the IDBRequest instance."><code>IDBRequest</code></a> object, and, in a separate thread, creates a cursor over the specified key range, as arranged by this index.</dd> </dl><h2 id="Properties">Properties</h2> <dl>
<dt> <a href="idbindex.name" title="A DOMString."><code>IDBIndex.name</code></a> <span class="inlineIndicator readOnly readOnlyInline" title="This value may not be changed.">Read only </span>
</dt> <dd> The name of this index.</dd> <dt> <a href="idbindex.objectstore" title="An IDBObjectStore."><code>IDBIndex.objectStore</code></a> <span class="inlineIndicator readOnly readOnlyInline" title="This value may not be changed.">Read only </span>
</dt> <dd> The name of the object store referenced by this index.</dd> <dt> <a href="idbindex.keypath" title="Any data type (any can be used as a key path)."><code>IDBIndex.keyPath</code></a> <span class="inlineIndicator readOnly readOnlyInline" title="This value may not be changed.">Read only </span>
</dt> <dd> The <a href="https://developer.mozilla.org/en/IndexedDB#gloss_key_path" title="en/IndexedDB#gloss key path">key path</a> of this index. If null, this index is not <a href="https://developer.mozilla.org/en/IndexedDB/Index#gloss_auto-populated" title="en/IndexedDB/Index#gloss auto-populated">auto-populated</a>.</dd> <dt> <a href="idbindex.multientry" title="A Boolean:"><code>IDBIndex.multiEntry</code></a> <span class="inlineIndicator readOnly readOnlyInline" title="This value may not be changed.">Read only </span>
</dt> <dd> Affects how the index behaves when the result of evaluating the index's key path yields an array. If <code>true</code>, there is one record in the index for each item in an array of keys. If <code>false</code>, then there is one record for each key that is an array.</dd> <dt> <a href="idbindex.unique" title="A Boolean:"><code>IDBIndex.unique</code></a> <span class="inlineIndicator readOnly readOnlyInline" title="This value may not be changed.">Read only </span>
</dt> <dd> If <code>true</code>, this index does not allow duplicate values for a key.</dd> </dl><h2 id="Examples">Examples</h2> <p>Opening a transaction then using <code>get()</code> to retrieve an object of known key:</p> <pre class=" language-javascript"><span class="token comment" spellcheck="true">// Let us open our database
</span><span class="token keyword">var</span> request <span class="token operator">=</span> window<span class="token punctuation">.</span>indexedDB<span class="token punctuation">.</span><span class="token function">open<span class="token punctuation">(</span></span><span class="token string">"toDoList"</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">
// these two event handlers act on the database being opened successfully, or not
</span>request<span class="token punctuation">.</span>onerror <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  note<span class="token punctuation">.</span>innerHTML <span class="token operator">+</span><span class="token operator">=</span> <span class="token string">'&lt;li&gt;Error loading database.&lt;/li&gt;'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
 
request<span class="token punctuation">.</span>onsuccess <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
note<span class="token punctuation">.</span>innerHTML <span class="token operator">+</span><span class="token operator">=</span> <span class="token string">'&lt;li&gt;Database initialised.&lt;/li&gt;'</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">
// store the result of opening the database in the db variable.
</span>db <span class="token operator">=</span> request<span class="token punctuation">.</span>result<span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">
// Open a transaction on the current database and get a reference to the object store
</span><span class="token comment" spellcheck="true">//that we want to pull information out of
</span><span class="token keyword">var</span> transaction <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">transaction<span class="token punctuation">(</span></span><span class="token punctuation">[</span><span class="token string">"toDoList"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> objectStore <span class="token operator">=</span> transaction<span class="token punctuation">.</span><span class="token function">objectStore<span class="token punctuation">(</span></span><span class="token string">"toDoList"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">
// Use get() to get a specific object from the object store, the key of which is "Walk dog"
</span><span class="token keyword">var</span> request <span class="token operator">=</span> objectStore<span class="token punctuation">.</span><span class="token function">get<span class="token punctuation">(</span></span><span class="token string">"Walk dog"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
request<span class="token punctuation">.</span>onerror <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log<span class="token punctuation">(</span></span><span class="token string">"There is no record stored for "</span> <span class="token operator">+</span> request<span class="token punctuation">.</span>result<span class="token punctuation">.</span>taskTitle<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
request<span class="token punctuation">.</span>onsuccess <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token comment" spellcheck="true"> // Do something with the request.result!
</span>  console<span class="token punctuation">.</span><span class="token function">log<span class="token punctuation">(</span></span><span class="token string">"The deadline time for "</span> <span class="token operator">+</span> request<span class="token punctuation">.</span>result<span class="token punctuation">.</span>taskTitle <span class="token operator">+</span> <span class="token string">" is "</span> <span class="token operator">+</span>
              request<span class="token punctuation">.</span>result<span class="token punctuation">.</span>hours <span class="token operator">+</span> <span class="token string">":"</span> <span class="token operator">+</span> request<span class="token punctuation">.</span>result<span class="token punctuation">.</span>minutes <span class="token operator">+</span> <span class="token string">"."</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></pre> <div class="note"> <p><strong>Note</strong>: need to work out a way to retrieve a series/range of objects using an index, or just all of them. Is this possible with get, or is this a job for cursor?</p> </div> <h2 id="Specifications">Specifications</h2> <table class="standard-table"><tbody>
<tr>
<th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr>
<tr>
<td><a class="external" href="https://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html#idl-def-IDBIndex" lang="en" title="The definition of 'IDBIndex' in that specification.">Indexed Database API</a></td> <td><span class="spec-CR">Candidate Recommendation</span></td> <td> </td> </tr>
</tbody></table><h2 id="Browser_compatibility" name="Browser_compatibility">Browser compatibility</h2>  <div id="compat-desktop"> <table class="compat-table"><tbody>
<tr>
<th>Feature</th> <th>Chrome</th> <th>Firefox (Gecko)</th> <th>Internet Explorer</th> <th>Opera</th> <th>Safari (WebKit)</th> </tr>
<tr>
<td>Basic support</td> <td>12<span class="inlineIndicator prefixBox prefixBoxInline" title="prefix">-webkit</span><br> 23</td> <td>4.0 (2.0)</td> <td>10</td> <td>17</td> <td><span style="color: #f00;">Not supported</span></td> </tr>
<tr>
<td><code>count()</code></td> <td>23</td> <td>10.0 (10.0)</td> <td>10</td> <td>17</td> <td><span style="color: #f00;">Not supported</span></td> </tr>
<tr>
<td>
<code>getAll()</code> and <code>getAllKeys()</code>
</td> <td><span style="color: #f00;">Not supported</span></td> <td>24.0 (24.0)<br> behind <code>dom.indexedDB.experimental</code> pref</td> <td><span style="color: #f00;">Not supported</span></td> <td><span style="color: #f00;">Not supported</span></td> <td><span style="color: #f00;">Not supported</span></td> </tr>
</tbody></table>
</div> <div id="compat-mobile"> <table class="compat-table"><tbody>
<tr>
<th>Feature</th> <th>Android</th> <th>Firefox Mobile (Gecko)</th> <th>Firefox OS</th> <th>IE Phone</th> <th>Opera Mobile</th> <th>Safari Mobile</th> </tr>
<tr>
<td>Basic support</td> <td>4.4</td> <td>4.0 (2.0)</td> <td>1.0.1</td> <td>10</td> <td>17</td> <td><span style="color: #f00;">Not supported</span></td> </tr>
<tr>
<td><code>count()</code></td> <td>4.4</td> <td>10.0 (10.0)</td> <td>1.0.1</td> <td>10</td> <td>17</td> <td><span style="color: #f00;">Not supported</span></td> </tr>
<tr>
<td>
<code>getAll()</code> and <code>getAllKeys()</code>
</td> <td><span style="color: #f00;">Not supported</span></td> <td>24.0 (24.0)<br> behind <code>dom.indexedDB.experimental</code> pref</td> <td>1.1 behind<br><code>dom.indexedDB.experimental</code> pref</td> <td><span style="color: #f00;">Not supported</span></td> <td><span style="color: #f00;">Not supported</span></td> <td><span style="color: #f00;">Not supported</span></td> </tr>
</tbody></table>
</div> <div class="warning"> <p>Be careful in Chrome as it still implements the old specification along the new one. Similarly it still has the prefixed <code>webkitIndexedDB</code> property even if the unprefixed <code>indexedDB</code> is present.</p> </div> <h2 id="See_also">See also</h2> <p>To learn more about various topics, see the following</p> <ul>
<li>Starting transactions: <a href="idbdatabase" title="Everything you do in IndexedDB always happens in the context of a transaction, representing interactions with data in the database. All objects in IndexedDB—including object stores, indexes, and cursors—are tied to a particular transaction. Thus, you cannot execute commands, access data, or open anything outside of a transaction."><code>IDBDatabase</code></a>
</li> <li>Setting transaction modes: <a href="idbtransaction" title="Inherits from: EventTarget"><code>IDBTransaction</code></a>
</li> <li>Setting a range of keys: <a href="idbkeyrange" title="A key range can have a single value or a range with upper and lower bounds or endpoints. If the key range has both upper and lower bounds, then it is bounded; if it has no bounds, it is unbounded. A bounded key range can either be open (the endpoints are excluded) or closed (the endpoints are included). To retrieve all keys within a certain range, you can use the following code constructs:"><code>IDBKeyRange</code></a>
</li> <li>The reference application for the examples in this reference: <a class="external" href="https://github.com/chrisdavidmills/to-do-notifications/tree/gh-pages">To-do Notifications</a> (<a class="external" href="http://chrisdavidmills.github.io/to-do-notifications/">view example live</a>.) Not every snippet appears in this example, but every example uses the same data structure and syntax, and they will make sense in the context of this example.</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/IDBIndex$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2013 Mozilla Contributors<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/IDBIndex" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/IDBIndex</a>
  </p>
</div>
</div></div>