<div class="_content"><div class="_page _mdn"><h1>IDBObjectStore</h1> <div class="summary"> <p>The <code>IDBObjectStore</code> interface of the <a href="https://developer.mozilla.org/en/IndexedDB" title="en/IndexedDB">IndexedDB API</a> represents an <a href="https://developer.mozilla.org/en/IndexedDB#gloss_object_store" title="en/IndexedDB#gloss object store">object store</a> in a database. Records within an object store are sorted according to their keys. This sorting enables fast insertion, look-up, and ordered retrieval.</p> </div> <h2 id="Methods">Methods</h2> <dl>
<dt> <a href="idbobjectstore.add" title="To determine if the add operation has completed successfully, listen for the transaction’s complete event in addition to the IDBObjectStore.add request’s success event, because the transaction may still fail after the success event fires. In other words, the success event is only triggered when the transaction has been successfully queued."><code>IDBObjectStore.add</code></a>
</dt> <dd> Returns an <a href="idbrequest" title="The request object does not initially contain any information about the result of the operation, but once information becomes available, an event is fired on the request, and the information becomes available through the properties of the IDBRequest instance."><code>IDBRequest</code></a> object, and, in a separate thread, creates a <a class="external" href="http://www.whatwg.org/specs/web-apps/current-work/multipage/common-dom-interfaces.html#structured-clone">structured clone</a> of the <code>value</code>, and stores the cloned value in the object store.</dd> <dt> <a href="idbobjectstore.clear" title="Clearing an object store consists of removing all records from the object store and removing all records in indexes that reference the object store."><code>IDBObjectStore.clear</code></a>
</dt> <dd> Creates and immediately returns an <a href="idbrequest" title="The request object does not initially contain any information about the result of the operation, but once information becomes available, an event is fired on the request, and the information becomes available through the properties of the IDBRequest instance."><code>IDBRequest</code></a> object, and clears this object store in a separate thread.</dd> <dt> <a href="idbobjectstore.delete" title="This method may raise a DOMException with a DOMError of the following types:"><code>IDBObjectStore.delete</code></a>
</dt> <dd> returns an <a href="idbrequest" title="The request object does not initially contain any information about the result of the operation, but once information becomes available, an event is fired on the request, and the information becomes available through the properties of the IDBRequest instance."><code>IDBRequest</code></a> object, and, in a separate thread, deletes the current object store.</dd> <dt> <a href="idbobjectstore.get" title="If a value is successfully found, then a structured clone of it is created and set as the result of the request object."><code>IDBObjectStore.get</code></a>
</dt> <dd> returns an <a href="idbrequest" title="The request object does not initially contain any information about the result of the operation, but once information becomes available, an event is fired on the request, and the information becomes available through the properties of the IDBRequest instance."><code>IDBRequest</code></a> object, and, in a separate thread, returns the object store selected by the specified key.</dd> <dt> <a href="idbobjectstore.createindex" title="Note that this method must be called only from a VersionChange&nbsp;transaction mode callback."><code>IDBObjectStore.createIndex</code></a>
</dt> <dd> Creates and returns a new <a href="idbindex" title="You can retrieve records in an object store through their keys or by using an index (cursors provide a third way: see IDBCursor). An index lets you look up records in an object store using properties of the values in the object stores records."><code>IDBIndex</code></a> object in the connected database.</dd> <dt> <a href="idbobjectstore.deleteindex" title="Note that this method must be called only from a VersionChange&nbsp;transaction mode callback. Note that this method synchronously modifies the IDBObjectStore.indexNames property."><code>IDBObjectStore.deleteIndex</code></a>
</dt> <dd> Destroys the index with the specified name in the connected database.</dd> <dt> <a href="idbobjectstore.index" title="This method may raise a DOMException with a DOMError of the following types:"><code>IDBObjectStore.index</code></a>
</dt> <dd> Opens the named index in this object store.</dd> <dt> <a href="idbobjectstore.put" title="If the record is successfully stored, then a success event is fired on the returned request object&nbsp;with the result set to the key for the stored record, and the transaction set to the transaction in which this object store is opened."><code>IDBObjectStore.put</code></a>
</dt> <dd> Returns an <a href="idbrequest" title="The request object does not initially contain any information about the result of the operation, but once information becomes available, an event is fired on the request, and the information becomes available through the properties of the IDBRequest instance."><code>IDBRequest</code></a> object, and, in a separate thread, creates a <a class="external" href="http://www.whatwg.org/specs/web-apps/current-work/multipage/common-dom-interfaces.html#structured-clone">structured clone</a> of the <code>value</code>, and stores the cloned value in the object store.</dd> </dl><h2 id="Properties">Properties</h2> <dl>
<dt> <a href="idbobjectstore.indexnames" title="A DOMStringList."><code>IDBObjectStore.indexNames</code></a> <span class="inlineIndicator readOnly readOnlyInline" title="This value may not be changed.">Read only </span>
</dt> <dd> A list of the names of <a href="https://developer.mozilla.org/en/IndexedDB#gloss_index" title="en/IndexedDB#gloss index">indexes</a> on objects in this object store.</dd> <dt> <a href="idbobjectstore.keypath" title="If this property is null, the application must provide a key for each modification operation."><code>IDBObjectStore.keyPath</code></a> <span class="inlineIndicator readOnly readOnlyInline" title="This value may not be changed.">Read only </span>
</dt> <dd> The <a href="https://developer.mozilla.org/en/IndexedDB#gloss_key_path" title="en/IndexedDB#gloss key path">key path</a> of this object store. If this attribute is null, the application must provide a key for each modification operation.</dd> <dt> <a href="idbobjectstore.name" title="A DOMString."><code>IDBObjectStore.name</code></a> <span class="inlineIndicator readOnly readOnlyInline" title="This value may not be changed.">Read only </span>
</dt> <dd> The name of this object store.</dd> <dt> <a href="idbobjectstore.transaction" title="An IDBTransaction object."><code>IDBObjectStore.transaction</code></a> <span class="inlineIndicator readOnly readOnlyInline" title="This value may not be changed.">Read only </span>
</dt> <dd> The name of the transaction to which this object store belongs.</dd> <dt> <a href="idbobjectstore.autoincrement" title="A Boolean:"><code>IDBObjectStore.autoIncrement</code></a> <span class="inlineIndicator readOnly readOnlyInline" title="This value may not be changed.">Read only </span>
</dt> <dd> The value of the auto increment flag for this object store.</dd> </dl><h2 id="Example">Example</h2> <pre class=" language-javascript"><span class="token comment" spellcheck="true">// Let us open our database
</span><span class="token keyword">var</span> request <span class="token operator">=</span> window<span class="token punctuation">.</span>indexedDB<span class="token punctuation">.</span><span class="token function">open<span class="token punctuation">(</span></span><span class="token string">"toDoList"</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

request<span class="token punctuation">.</span>onsuccess <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  note<span class="token punctuation">.</span>innerHTML <span class="token operator">+</span><span class="token operator">=</span> <span class="token string">'&lt;li&gt;Database initialised.&lt;/li&gt;'</span><span class="token punctuation">;</span>
 
 <span class="token comment" spellcheck="true"> // store the result of opening the database in the db variable.
</span>  db <span class="token operator">=</span> request<span class="token punctuation">.</span>result<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">
// This event handles the event whereby a new version of the database needs to be created
</span><span class="token comment" spellcheck="true">// Either one has not been created before, or a new version number has been submitted via the
</span><span class="token comment" spellcheck="true">// window.indexedDB.open line above
</span>request<span class="token punctuation">.</span>onupgradeneeded <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> db <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>result<span class="token punctuation">;</span>
 
  db<span class="token punctuation">.</span>onerror <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    note<span class="token punctuation">.</span>innerHTML <span class="token operator">+</span><span class="token operator">=</span> <span class="token string">'&lt;li&gt;Error loading database.&lt;/li&gt;'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

 <span class="token comment" spellcheck="true"> // Create an objectStore for this database
</span> 
  <span class="token keyword">var</span> objectStore <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">createObjectStore<span class="token punctuation">(</span></span><span class="token string">"toDoList"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> keyPath<span class="token punctuation">:</span> <span class="token string">"taskTitle"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
 <span class="token comment" spellcheck="true"> // define what data items the objectStore will contain
</span> 
  objectStore<span class="token punctuation">.</span><span class="token function">createIndex<span class="token punctuation">(</span></span><span class="token string">"hours"</span><span class="token punctuation">,</span> <span class="token string">"hours"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> unique<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  objectStore<span class="token punctuation">.</span><span class="token function">createIndex<span class="token punctuation">(</span></span><span class="token string">"minutes"</span><span class="token punctuation">,</span> <span class="token string">"minutes"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> unique<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  objectStore<span class="token punctuation">.</span><span class="token function">createIndex<span class="token punctuation">(</span></span><span class="token string">"day"</span><span class="token punctuation">,</span> <span class="token string">"day"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> unique<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  objectStore<span class="token punctuation">.</span><span class="token function">createIndex<span class="token punctuation">(</span></span><span class="token string">"month"</span><span class="token punctuation">,</span> <span class="token string">"month"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> unique<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  objectStore<span class="token punctuation">.</span><span class="token function">createIndex<span class="token punctuation">(</span></span><span class="token string">"year"</span><span class="token punctuation">,</span> <span class="token string">"year"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> unique<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  objectStore<span class="token punctuation">.</span><span class="token function">createIndex<span class="token punctuation">(</span></span><span class="token string">"notified"</span><span class="token punctuation">,</span> <span class="token string">"notified"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> unique<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
  note<span class="token punctuation">.</span>innerHTML <span class="token operator">+</span><span class="token operator">=</span> <span class="token string">'&lt;li&gt;Object store created.&lt;/li&gt;'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">
// Create a new item to add in to the object store
</span><span class="token keyword">var</span> newItem <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> taskTitle<span class="token punctuation">:</span> <span class="token string">"Walk dog"</span><span class="token punctuation">,</span> hours<span class="token punctuation">:</span> <span class="token number">19</span><span class="token punctuation">,</span> minutes<span class="token punctuation">:</span> <span class="token number">30</span><span class="token punctuation">,</span> day<span class="token punctuation">:</span> <span class="token number">24</span><span class="token punctuation">,</span> month<span class="token punctuation">:</span> December<span class="token punctuation">,</span> year<span class="token punctuation">:</span> <span class="token number">2013</span><span class="token punctuation">,</span> notified<span class="token punctuation">:</span> <span class="token string">"no"</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">
// open a read/write db transaction, ready for adding the data
</span><span class="token keyword">var</span> transaction <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">transaction<span class="token punctuation">(</span></span><span class="token punctuation">[</span><span class="token string">"toDoList"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">"readwrite"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">
// report on the success of opening the transaction
</span>transaction<span class="token punctuation">.</span>oncomplete <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  note<span class="token punctuation">.</span>innerHTML <span class="token operator">+</span><span class="token operator">=</span> <span class="token string">'&lt;li&gt;Transaction opened for task addition.&lt;/li&gt;'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

transaction<span class="token punctuation">.</span>onerror <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  note<span class="token punctuation">.</span>innerHTML <span class="token operator">+</span><span class="token operator">=</span> <span class="token string">'&lt;li&gt;Transaction not opened due to error. Duplicate items not allowed.&lt;/li&gt;'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">
// create an object store on the transaction
</span><span class="token keyword">var</span> objectStore <span class="token operator">=</span> transaction<span class="token punctuation">.</span><span class="token function">objectStore<span class="token punctuation">(</span></span><span class="token string">"toDoList"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">
// add our newItem object to the object store
</span><span class="token keyword">var</span> request <span class="token operator">=</span> objectStore<span class="token punctuation">.</span><span class="token function">add<span class="token punctuation">(</span></span>newItem<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        

request<span class="token punctuation">.</span>onsuccess <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  note<span class="token punctuation">.</span>innerHTML <span class="token operator">+</span><span class="token operator">=</span> <span class="token string">'&lt;li&gt;New item added to database.&lt;/li&gt;'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre> <h2 id="Specifications">Specifications</h2> <table class="standard-table"><tbody>
<tr>
<th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr>
<tr>
<td><a class="external" href="https://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html#idl-def-IDBObjectStore" lang="en" title="The definition of 'IDBObjectStore' in that specification.">Indexed Database API</a></td> <td><span class="spec-CR">Candidate Recommendation</span></td> <td> </td> </tr>
</tbody></table><h2 id="Browser_compatibility">Browser compatibility</h2>  <div id="compat-desktop"> <table class="compat-table"><tbody>
<tr>
<th>Feature</th> <th>Chrome</th> <th>Firefox (Gecko)</th> <th>Internet Explorer</th> <th>Opera</th> <th>Safari (WebKit)</th> </tr>
<tr>
<td>Basic support</td> <td>12</td> <td>4.0 (2.0)</td> <td>10</td> <td>17</td> <td><span style="color: #f00;">Not supported</span></td> </tr>
<tr>
<td><code>count()</code></td> <td>23</td> <td>10.0 (10.0)</td> <td>10</td> <td>17</td> <td><span style="color: #f00;">Not supported</span></td> </tr>
</tbody></table>
</div> <div id="compat-mobile"> <table class="compat-table"><tbody>
<tr>
<th>Feature</th> <th>Android</th> <th>Firefox Mobile (Gecko)</th> <th>Firefox OS</th> <th>IE Phone</th> <th>Opera Mobile</th> <th>Safari Mobile</th> </tr>
<tr>
<td>Basic support</td> <td>4.4</td> <td>6.0 (6.0)</td> <td>1.0.1</td> <td>10</td> <td>17</td> <td><span style="color: #f00;">Not supported</span></td> </tr>
<tr>
<td><code>count()</code></td> <td>4.4</td> <td><span style="color: rgb(255, 153, 0);" title="Compatibility unknown; please update this.">?</span></td> <td>1.0.1</td> <td>10</td> <td>17</td> <td><span style="color: #f00;">Not supported</span></td> </tr>
</tbody></table>
</div> <div class="warning"> <p>Be careful in Chrome as it still implements the old specification along the new one. Similarly it still has the prefixed <code>webkitIndexedDB</code> property even if the unprefixed <code>indexedDB</code> is present.</p> </div> <h2 id="See_also">See also</h2> <p>To learn more about various topics, see the following</p> <ul>
<li><a href="https://developer.mozilla.org/en-US/docs/IndexedDB/Using_IndexedDB">Using IndexedDB</a></li> <li>Starting transactions: <a href="idbdatabase" title="Everything you do in IndexedDB always happens in the context of a transaction, representing interactions with data in the database. All objects in IndexedDB—including object stores, indexes, and cursors—are tied to a particular transaction. Thus, you cannot execute commands, access data, or open anything outside of a transaction."><code>IDBDatabase</code></a>
</li> <li>Setting transaction modes: <a href="idbtransaction" title="Inherits from: EventTarget"><code>IDBTransaction</code></a>
</li> <li>The reference application for the examples in this reference: <a class="external" href="https://github.com/chrisdavidmills/to-do-notifications/tree/gh-pages">To-do Notifications</a> (<a class="external" href="http://chrisdavidmills.github.io/to-do-notifications/">view example live</a>.) Not every snippet appears in this example, but every example uses the same data structure and syntax, and they will make sense in the context of this example.</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/IDBObjectStore$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2013 Mozilla Contributors<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/IDBObjectStore" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/IDBObjectStore</a>
  </p>
</div>
</div></div>