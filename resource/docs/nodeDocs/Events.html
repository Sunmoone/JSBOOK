<div class="_page _node"><h1 id="events_events">Events</h1> <pre class="api_stability_4">Stability: 4 - API Frozen</pre> <p>Many objects in Node emit events: a <code>net.Server</code> emits an event each time a peer connects to it, a <code>fs.readStream</code> emits an event when the file is opened. All objects which emit events are instances of <code>events.EventEmitter</code>. You can access this module by doing: <code>require("events");</code> </p> <p>Typically, event names are represented by a camel-cased string, however, there aren't any strict restrictions on that, as any string will be accepted. </p> <p>Functions can then be attached to objects, to be executed when an event is emitted. These functions are called <em>listeners</em>. Inside a listener function, <code>this</code> refers to the <code>EventEmitter</code> that the listener was attached to. </p> <h2 id="events_class_events_eventemitter" class="">Class: events.EventEmitter</h2> <p>To access the EventEmitter class, <code>require('events').EventEmitter</code>. </p> <p>When an <code>EventEmitter</code> instance experiences an error, the typical action is to emit an <code>'error'</code> event. Error events are treated as a special case in node. If there is no listener for it, then the default action is to print a stack trace and exit the program. </p> <p>All EventEmitters emit the event <code>'newListener'</code> when new listeners are added and <code>'removeListener'</code> when a listener is removed. </p> <h3 id="events_emitter_addlistener_event_listener">emitter.addListener(event, listener)</h3> <h3 id="events_emitter_on_event_listener">emitter.on(event, listener)</h3> <p>Adds a listener to the end of the listeners array for the specified event. </p> <pre class=" language-javascript"><code class=" language-javascript">server<span class="token punctuation">.</span><span class="token function">on<span class="token punctuation">(</span></span><span class="token string">'connection'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>stream<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log<span class="token punctuation">(</span></span><span class="token string">'someone connected!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p>Returns emitter, so calls can be chained. </p> <h3 id="events_emitter_once_event_listener">emitter.once(event, listener)</h3> <p>Adds a <strong>one time</strong> listener for the event. This listener is invoked only the next time the event is fired, after which it is removed. </p> <pre class=" language-javascript"><code class=" language-javascript">server<span class="token punctuation">.</span><span class="token function">once<span class="token punctuation">(</span></span><span class="token string">'connection'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>stream<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log<span class="token punctuation">(</span></span><span class="token string">'Ah, we have our first user!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p>Returns emitter, so calls can be chained. </p> <h3 id="events_emitter_removelistener_event_listener">emitter.removeListener(event, listener)</h3> <p>Remove a listener from the listener array for the specified event. <strong>Caution</strong>: changes array indices in the listener array behind the listener. </p> <pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword">var</span> callback <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>stream<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log<span class="token punctuation">(</span></span><span class="token string">'someone connected!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
server<span class="token punctuation">.</span><span class="token function">on<span class="token punctuation">(</span></span><span class="token string">'connection'</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">
// ...
</span>server<span class="token punctuation">.</span><span class="token function">removeListener<span class="token punctuation">(</span></span><span class="token string">'connection'</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p>Returns emitter, so calls can be chained. </p> <h3 id="events_emitter_removealllisteners_event">emitter.removeAllListeners([event])</h3> <p>Removes all listeners, or those of the specified event. </p> <p>Returns emitter, so calls can be chained. </p> <h3 id="events_emitter_setmaxlisteners_n">emitter.setMaxListeners(n)</h3> <p>By default EventEmitters will print a warning if more than 10 listeners are added for a particular event. This is a useful default which helps finding memory leaks. Obviously not all Emitters should be limited to 10. This function allows that to be increased. Set to zero for unlimited. </p> <h3 id="events_emitter_listeners_event">emitter.listeners(event)</h3> <p>Returns an array of listeners for the specified event. </p> <pre class=" language-javascript"><code class=" language-javascript">server<span class="token punctuation">.</span><span class="token function">on<span class="token punctuation">(</span></span><span class="token string">'connection'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>stream<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log<span class="token punctuation">(</span></span><span class="token string">'someone connected!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log<span class="token punctuation">(</span></span>util<span class="token punctuation">.</span><span class="token function">inspect<span class="token punctuation">(</span></span>server<span class="token punctuation">.</span><span class="token function">listeners<span class="token punctuation">(</span></span><span class="token string">'connection'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"> // [ [Function] ]</span></code></pre> <h3 id="events_emitter_emit_event_arg1_arg2">emitter.emit(event, [arg1], [arg2], [...])</h3> <p>Execute each of the listeners in order with the supplied arguments. </p> <p>Returns <code>true</code> if event had listeners, <code>false</code> otherwise. </p> <h3 id="events_class_method_eventemitter_listenercount_emitter_event">Class Method: EventEmitter.listenerCount(emitter, event)</h3> <p>Return the number of listeners for a given event. </p> <h3 id="events_event_newlistener">Event: 'newListener'</h3> <div class="signature"><ul>
<li>
<code>event</code> <span class="type">String</span> The event name</li> <li>
<code>listener</code> <span class="type">Function</span> The event handler function</li> </ul></div> <p>This event is emitted any time someone adds a new listener. It is unspecified if <code>listener</code> is in the list returned by <code>emitter.listeners(event)</code>. </p> <h3 id="events_event_removelistener">Event: 'removeListener'</h3> <div class="signature"><ul>
<li>
<code>event</code> <span class="type">String</span> The event name</li> <li>
<code>listener</code> <span class="type">Function</span> The event handler function</li> </ul></div> <p>This event is emitted any time someone removes a listener. It is unspecified if <code>listener</code> is in the list returned by <code>emitter.listeners(event)</code>. </p><div class="_attribution">
  <p class="_attribution-p">
    Â© Joyent, Inc. and other Node contributors<br>Licensed under the MIT License.<br>
    <a href="http://nodejs.org/api/events.html" class="_attribution-link">http://nodejs.org/api/events.html</a>
  </p>
</div>
</div>