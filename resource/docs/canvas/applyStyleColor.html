<article id="wikiArticle">
                                          <p>在 <a href="/cn/Canvas_tutorial/Drawing_shapes" title="cn/Canvas tutorial/Drawing shapes">绘制图形</a> 的章节里，我只用到默认的线条和填充样式。而在这一章里，我们将会探讨 canvas 全部的可选项，来绘制出更加吸引人的内容。</p>
<h2 id="Colors" name="Colors">色彩 Colors</h2>
<p>Up until now we've only seen methods of the drawing context. If we want to apply colors to a shape, there are two important properties we can use: <code>fillStyle</code> and <code>strokeStyle</code>.</p>
<p>到目前为止，我们只看到过绘制内容的方法。如果我们想要给图形上色，有两个重要的属性可以做到：<code>fillStyle</code> <span style="font-family: monospace;">和 </span><code>strokeStyle。</code></p>
<div style="border: 1px solid rgb(208, 221, 158); background: rgb(239, 248, 206) none repeat scroll 0% 0%; padding-left: 10px;">
  <p><code><strong>fillStyle</strong> = color</code><br>
    <code><strong>strokeStyle</strong> = color</code></p>
</div>
<p><code>strokeStyle</code> is used for setting the shape outline color and <code>fillStyle</code> is for the fill color. <code>color</code> can be a string representing a CSS color value, a gradient object, or a pattern object. We'll look at gradient and pattern objects later. By default, the stroke and fill color are set to black (CSS color value #000000).</p>
<p><code>strokeStyle</code> 是用于设置图形轮廓的颜色，而 <code>fillStyle</code> 用于设置填充颜色。<code>color</code> 可以是表示 CSS 颜色值的字符串，渐变对象或者图案对象。我们迟些再回头探讨渐变和图案对象。默认情况下，线条和填充颜色都是黑色(CSS 颜色值 #000000)。</p>
<p>The valid strings you can enter should, according to the specification, be <a class="external" href="http://www.w3.org/TR/2003/CR-css3-color-20030514/#numerical">CSS3 color values</a>. Each of the following examples describe the same color.</p>
<p>您输入的应该是符合 <a class="external" href="http://www.w3.org/TR/2003/CR-css3-color-20030514/#numerical">CSS3 颜色值标准</a> 的有效字符串。下面的例子都表示同一种颜色。</p>
<pre class="brush: js  language-js" data-number=""><code class=" language-js"><span class="token comment" spellcheck="true">// 这些 fillStyle 的值均为 '橙色'
</span>ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">"orange"</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">"#FFA500"</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">"rgb(255,165,0)"</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">"rgba(255,165,0,1)"</span><span class="token punctuation">;</span><div class="line-number" data-start="1" style="top: 0px;"></div><div class="line-number" data-start="2" style="top: 19px;"></div><div class="line-number" data-start="3" style="top: 38px;"></div><div class="line-number" data-start="4" style="top: 57px;"></div><div class="line-number" data-start="5" style="top: 76px;"></div></code></pre>
<p><strong>Note:</strong> Currently not all CSS 3 color values are supported in the Gecko engine. For instance the color values <code>hsl(100%,25%,0)</code> or <code>rgb(0,100%,0)</code> are not allowed. If you stick to the ones above, you won't run into any problems.</p>
<p><strong>注意:</strong> 目前 Gecko 引擎并没有提供对所有的 CSS 3 颜色值的支持。例如，<code>hsl(100%,25%,0)</code> 或者 <code>rgb(0,100%,0)</code> 都不可用。但如果您遵循上面例子的规范，应该不会有问题。</p>
<p><strong>Note:</strong> If you set the <code>strokeStyle</code> and/or <code>fillStyle</code> property, the new value becomes the default for all shapes being drawn from then on. For every shape you want in a different color, you will need to reassign the <code>fillStyle</code> or <code>strokeStyle</code> property.</p>
<p><strong>注意:</strong> 一旦您设置了 <code>strokeStyle</code> 或者 <code>fillStyle</code> 的值，那么这个新值就会成为新绘制的图形的默认值。如果你要给每个图形上不同的颜色，你需要重新设置 <code>fillStyle</code> 或 <code>strokeStyle</code> 的值。</p>
<h4 id="A_fillStyle_example" name="A_fillStyle_example"><code>fillStyle</code> 示例</h4>
<p><img align="right" alt="" class="internal" src="/@api/deki/files/82/=Canvas_fillstyle.png">In this example, I once again use two <code>for</code> loops to draw a grid of rectangles, each in a different color. The resulting image should look something like the image on the right. There is nothing too spectacular happening here. I use the two variables <code>i</code> and <code>j</code> to generate a unique RGB color for each square. I only modify the red and green values. The blue channel has a fixed value. By modifying the channels, you can generate all kinds of palettes. By increasing the steps, you can achieve something that looks like the color palettes Photoshop uses.</p>
<p>在本示例里，我会再度用两层 <code>for</code> 循环来绘制方格阵列，每个方格不同的颜色。结果如右图，但实现所用的代码却没那么绚丽。我用了两个变量 i 和 j 来为每一个方格产生唯一的 RGB 色彩值，其中仅修改红色和绿色通道的值，而保持蓝色通道的值不变。你可以通过修改这些颜色通道的值来产生各种各样的色板。通过增加渐变的频率，你还可以绘制出类似 Photoshop 里面的那样的调色板。</p>
<p><a class="external" href="/samples/canvas-tutorial/4_1_canvas_fillstyle.html" title="samples/canvas-tutorial/4_1_canvas_fillstyle.html">查看示例</a></p>
<pre class="brush: js  language-js" data-number=""><code class=" language-js"><span class="token keyword">function</span> <span class="token function">draw<span class="token punctuation">(</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> ctx <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById<span class="token punctuation">(</span></span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContext<span class="token punctuation">(</span></span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">6</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span><span class="token number">6</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'rgb('</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">floor<span class="token punctuation">(</span></span><span class="token number">255</span><span class="token operator">-</span><span class="token number">42.5</span><span class="token operator">*</span>i<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">','</span> <span class="token operator">+</span> 
                       Math<span class="token punctuation">.</span><span class="token function">floor<span class="token punctuation">(</span></span><span class="token number">255</span><span class="token operator">-</span><span class="token number">42.5</span><span class="token operator">*</span>j<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">',0)'</span><span class="token punctuation">;</span>
      ctx<span class="token punctuation">.</span><span class="token function">fillRect<span class="token punctuation">(</span></span>j<span class="token operator">*</span><span class="token number">25</span><span class="token punctuation">,</span>i<span class="token operator">*</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><div class="line-number" data-start="1" style="top: 0px;"></div><div class="line-number" data-start="2" style="top: 19px;"></div><div class="line-number" data-start="3" style="top: 38px;"></div><div class="line-number" data-start="4" style="top: 57px;"></div><div class="line-number" data-start="5" style="top: 76px;"></div><div class="line-number" data-start="6" style="top: 95px;"></div><div class="line-number" data-start="7" style="top: 114px;"></div><div class="line-number" data-start="8" style="top: 133px;"></div><div class="line-number" data-start="9" style="top: 152px;"></div><div class="line-number" data-start="10" style="top: 171px;"></div></code></pre>
<h4 id="A_strokeStyle_example" name="A_strokeStyle_example"><code>strokeStyle</code> 示例</h4>
<p><img align="right" alt="" class="internal" src="/@api/deki/files/109/=Canvas_strokestyle.png">This example is similar to the one above but now using the <code>strokeStyle</code> property. Here I use the <code>arc</code> method to draw circles instead of squares.</p>
<p>这个示例与上面的有点类似，但这次用到的是 <code>strokeStyle</code> 属性，画的不是方格，而是用 <code>arc</code> 方法来画圆。</p>
<p><a class="external" href="/samples/canvas-tutorial/4_2_canvas_strokestyle.html" title="samples/canvas-tutorial/4_2_canvas_strokestyle.html">查看示例</a></p>
<pre class="brush: js  language-js" data-number=""><code class=" language-js"><span class="token keyword">function</span> <span class="token function">draw<span class="token punctuation">(</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> ctx <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById<span class="token punctuation">(</span></span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContext<span class="token punctuation">(</span></span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">6</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span><span class="token number">6</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">'rgb(0,'</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">floor<span class="token punctuation">(</span></span><span class="token number">255</span><span class="token operator">-</span><span class="token number">42.5</span><span class="token operator">*</span>i<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">','</span> <span class="token operator">+</span> 
                         Math<span class="token punctuation">.</span><span class="token function">floor<span class="token punctuation">(</span></span><span class="token number">255</span><span class="token operator">-</span><span class="token number">42.5</span><span class="token operator">*</span>j<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">')'</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">beginPath<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">arc<span class="token punctuation">(</span></span><span class="token number">12.5</span><span class="token operator">+</span>j<span class="token operator">*</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">12.5</span><span class="token operator">+</span>i<span class="token operator">*</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>Math<span class="token punctuation">.</span>PI<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">stroke<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><div class="line-number" data-start="1" style="top: 0px;"></div><div class="line-number" data-start="2" style="top: 19px;"></div><div class="line-number" data-start="3" style="top: 38px;"></div><div class="line-number" data-start="4" style="top: 57px;"></div><div class="line-number" data-start="5" style="top: 76px;"></div><div class="line-number" data-start="6" style="top: 95px;"></div><div class="line-number" data-start="7" style="top: 114px;"></div><div class="line-number" data-start="8" style="top: 133px;"></div><div class="line-number" data-start="9" style="top: 152px;"></div><div class="line-number" data-start="10" style="top: 171px;"></div><div class="line-number" data-start="11" style="top: 190px;"></div><div class="line-number" data-start="12" style="top: 209px;"></div></code></pre>
<h2 id="Transparency" name="Transparency">透明度 <span>Transparency</span></h2>
<p>Besides drawing opaque shapes to the canvas, we can also draw semi-transparent shapes. This is done by setting the <code>globalAlpha</code> property, or we could assign a semi-transparent color to the stroke and/or fill style.</p>
<p>除了可以绘制实色图形，我们还可以用 canvas 来绘制半透明的图形。通过设置 <code>globalAlpha</code> 属性或者使用一个半透明颜色作为轮廓或填充的样式。</p>
<div style="border: 1px solid rgb(208, 221, 158); background: rgb(239, 248, 206) none repeat scroll 0% 0%; padding-left: 10px;">
  <p><code><strong>globalAlpha</strong> = transparency value</code></p>
</div>
<p>This property applies a transparency value to all shapes drawn on the canvas. The valid range of values is from 0.0 (fully transparent) to 1.0 (fully opaque). By default, this property is set to 1.0 (fully opaque).</p>
<p>这个属性影响到 canvas 里所有图形的透明度，有效的值范围是 0.0 （完全透明）到 1.0（完全不透明），默认是 1.0。</p>
<p>The <code>globalAlpha</code> property can be useful if you want to draw a lot of shapes on the canvas with similar transparency. I think, however, that the next option is a little more practical.</p>
<p><code>globalAlpha</code> 属性在需要绘制大量拥有相同透明度的图形时候相当高效。不过，我认为下面的方法可操作性更强一点。</p>
<p>Because the <code>strokeStyle</code> and <code>fillStyle</code> properties accept CSS 3 color values, we can use the following notation to assign a transparent color to them.</p>
<p>因为 <code>strokeStyle</code> 和 <code>fillStyle</code> 属性接受符合 CSS 3 规范的颜色值，那我们可以用下面的写法来设置具有透明度的颜色。</p>
<pre class="brush: js  language-js" data-number=""><code class=" language-js"><span class="token comment" spellcheck="true">// Assigning transparent colors to stroke and fill style
</span>ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">"rgba(255,0,0,0.5)"</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">"rgba(255,0,0,0.5)"</span><span class="token punctuation">;</span><div class="line-number" data-start="1" style="top: 0px;"></div><div class="line-number" data-start="2" style="top: 19px;"></div><div class="line-number" data-start="3" style="top: 38px;"></div></code></pre>
<p>The <code>rgba()</code> function is similar to the <code>rgb()</code> function but it has one extra parameter. The last parameter sets the transparency value of this particular color. The valid range is again between 0.0 (fully transparent) and 1.0 (fully opaque).</p>
<p><code>rgba() </code>方法与 <code>rgb() </code>方法类似，就多了一个用于设置色彩透明度的参数。它的有效范围是从 0.0（完全透明）到 1.0（完全不透明）。</p>
<h4 id="A_globalAlpha_example" name="A_globalAlpha_example"><code>globalAlpha</code> 示例</h4>
<p><img align="right" alt="" class="internal" src="/@api/deki/files/83/=Canvas_globalalpha.png" style="">In this example I've drawn a background of four different colored squares. On top of these, I've draw a set of semi-transparent circles. The <code>globalAlpha</code> property is set at 0.2 which will be used for all shapes from that point on. Every step in the <code>for</code> loop draws a set of circles with an increasing radius. The final result is a radial gradient. By overlaying ever more circles on top of each other, we effectively reduce the transparency of the circles that have already been drawn. By increasing the step count and in effect drawing more circles, the background would completely disappear from the center of the image.</p>
<p>在这个例子里，我用四色格作为背景，设置 <code>globalAlpha</code> 为 0.2后，在上面画一系列半径递增的半透明圆。最终结果是一个径向渐变效果。圆叠加得越更多，原先所画的圆的透明度会越低。通过增加循环次数，画更多的圆，背景图的中心部分会完全消失。</p>
<div class="note">
  <strong>注意:</strong>
  <ul>
    <li>这个例子在 Firefox 1.5 beta 1 里是行不通的。你需要 nightly branch build 或者等待新版本发布来实践这个效果。</li>
    <li>这个例子在 Safari 下可能由于颜色值无效而达不到效果。例子里是 '#09F' 是不符合规范要求的，不过 Firefox 是认识这种格式的。</li>
  </ul>
</div>
<p><a class="external" href="/samples/canvas-tutorial/4_3_canvas_globalalpha.html" title="samples/canvas-tutorial/4_3_canvas_globalalpha.html">查看示例</a></p>
<pre class="brush: js  language-js" data-number=""><code class=" language-js"><span class="token keyword">function</span> <span class="token function">draw<span class="token punctuation">(</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> ctx <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById<span class="token punctuation">(</span></span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContext<span class="token punctuation">(</span></span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token comment" spellcheck="true"> // draw background
</span>  ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'#FD0'</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">fillRect<span class="token punctuation">(</span></span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">75</span><span class="token punctuation">,</span><span class="token number">75</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'#6C0'</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">fillRect<span class="token punctuation">(</span></span><span class="token number">75</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">75</span><span class="token punctuation">,</span><span class="token number">75</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'#09F'</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">fillRect<span class="token punctuation">(</span></span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">75</span><span class="token punctuation">,</span><span class="token number">75</span><span class="token punctuation">,</span><span class="token number">75</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'#F30'</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">fillRect<span class="token punctuation">(</span></span><span class="token number">75</span><span class="token punctuation">,</span><span class="token number">75</span><span class="token punctuation">,</span><span class="token number">75</span><span class="token punctuation">,</span><span class="token number">75</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'#FFF'</span><span class="token punctuation">;</span>

 <span class="token comment" spellcheck="true"> // set transparency value
</span>  ctx<span class="token punctuation">.</span>globalAlpha <span class="token operator">=</span> <span class="token number">0.2</span><span class="token punctuation">;</span>

 <span class="token comment" spellcheck="true"> // Draw semi transparent circles
</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">7</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      ctx<span class="token punctuation">.</span><span class="token function">beginPath<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      ctx<span class="token punctuation">.</span><span class="token function">arc<span class="token punctuation">(</span></span><span class="token number">75</span><span class="token punctuation">,</span><span class="token number">75</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token operator">+</span><span class="token number">10</span><span class="token operator">*</span>i<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>Math<span class="token punctuation">.</span>PI<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      ctx<span class="token punctuation">.</span><span class="token function">fill<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><div class="line-number" data-start="1" style="top: 0px;"></div><div class="line-number" data-start="2" style="top: 19px;"></div><div class="line-number" data-start="3" style="top: 38px;"></div><div class="line-number" data-start="4" style="top: 57px;"></div><div class="line-number" data-start="5" style="top: 76px;"></div><div class="line-number" data-start="6" style="top: 95px;"></div><div class="line-number" data-start="7" style="top: 114px;"></div><div class="line-number" data-start="8" style="top: 133px;"></div><div class="line-number" data-start="9" style="top: 152px;"></div><div class="line-number" data-start="10" style="top: 171px;"></div><div class="line-number" data-start="11" style="top: 190px;"></div><div class="line-number" data-start="12" style="top: 209px;"></div><div class="line-number" data-start="13" style="top: 228px;"></div><div class="line-number" data-start="14" style="top: 247px;"></div><div class="line-number" data-start="15" style="top: 266px;"></div><div class="line-number" data-start="16" style="top: 285px;"></div><div class="line-number" data-start="17" style="top: 304px;"></div><div class="line-number" data-start="18" style="top: 323px;"></div><div class="line-number" data-start="19" style="top: 342px;"></div><div class="line-number" data-start="20" style="top: 361px;"></div><div class="line-number" data-start="21" style="top: 380px;"></div><div class="line-number" data-start="22" style="top: 399px;"></div><div class="line-number" data-start="23" style="top: 418px;"></div></code></pre>
<h4 id="An_example_using_rgba.28.29" name="An_example_using_rgba.28.29"><code>rgba()示例</code></h4>
<p><img align="right" alt="" class="internal" src="/@api/deki/files/99/=Canvas_rgba.png">In this second example I've done something similar to the one above, but instead of drawing circles on top of each other, I've drawn small rectangles with increasing opacity. Using <code>rgba()</code> gives you a little more control and flexibility because we can set the fill and stroke style individually.</p>
<p>第二个例子和上面那个类似，不过不是画圆，而是画矩形。这里还可以看出，rgba() 可以分别设置轮廓和填充样式，因而具有更好的可操作性和使用弹性。</p>
<p><a class="external" href="/samples/canvas-tutorial/4_4_canvas_rgba.html" title="samples/canvas-tutorial/4_4_canvas_rgba.html">查看示例</a></p>
<pre class="brush: js  language-js" data-number=""><code class=" language-js"><span class="token keyword">function</span> <span class="token function">draw<span class="token punctuation">(</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> ctx <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById<span class="token punctuation">(</span></span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContext<span class="token punctuation">(</span></span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token comment" spellcheck="true"> // Draw background
</span>  ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'rgb(255,221,0)'</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">fillRect<span class="token punctuation">(</span></span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">,</span><span class="token number">37.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'rgb(102,204,0)'</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">fillRect<span class="token punctuation">(</span></span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">37.5</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">,</span><span class="token number">37.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'rgb(0,153,255)'</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">fillRect<span class="token punctuation">(</span></span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">75</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">,</span><span class="token number">37.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'rgb(255,51,0)'</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">fillRect<span class="token punctuation">(</span></span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">112.5</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">,</span><span class="token number">37.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token comment" spellcheck="true"> // Draw semi transparent rectangles
</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'rgba(255,255,255,'</span><span class="token operator">+</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">10</span><span class="token operator">+</span><span class="token string">')'</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span><span class="token number">4</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      ctx<span class="token punctuation">.</span><span class="token function">fillRect<span class="token punctuation">(</span></span><span class="token number">5</span><span class="token operator">+</span>i<span class="token operator">*</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token operator">+</span>j<span class="token operator">*</span><span class="token number">37.5</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">27.5</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><div class="line-number" data-start="1" style="top: 0px;"></div><div class="line-number" data-start="2" style="top: 19px;"></div><div class="line-number" data-start="3" style="top: 38px;"></div><div class="line-number" data-start="4" style="top: 57px;"></div><div class="line-number" data-start="5" style="top: 76px;"></div><div class="line-number" data-start="6" style="top: 95px;"></div><div class="line-number" data-start="7" style="top: 114px;"></div><div class="line-number" data-start="8" style="top: 133px;"></div><div class="line-number" data-start="9" style="top: 152px;"></div><div class="line-number" data-start="10" style="top: 171px;"></div><div class="line-number" data-start="11" style="top: 190px;"></div><div class="line-number" data-start="12" style="top: 209px;"></div><div class="line-number" data-start="13" style="top: 228px;"></div><div class="line-number" data-start="14" style="top: 247px;"></div><div class="line-number" data-start="15" style="top: 266px;"></div><div class="line-number" data-start="16" style="top: 285px;"></div><div class="line-number" data-start="17" style="top: 304px;"></div><div class="line-number" data-start="18" style="top: 323px;"></div><div class="line-number" data-start="19" style="top: 342px;"></div><div class="line-number" data-start="20" style="top: 361px;"></div><div class="line-number" data-start="21" style="top: 380px;"></div></code></pre>
<h2 id="Line_styles" name="Line_styles">线型 Line styles</h2>
<p>There are several properties which allow us to style lines.</p>
<p>可以通过一系列属性来设置线的样式。</p>
<div style="border: 1px solid rgb(208, 221, 158); background: rgb(239, 248, 206) none repeat scroll 0% 0%; padding-left: 10px;">
  <p><code><strong>lineWidth</strong> = value</code><br>
    <code><strong>lineCap</strong> = type</code><br>
    <code><strong>lineJoin</strong> = type</code><br>
    <code><strong>miterLimit</strong> = value</code></p>
</div>
<p>I could describe these in detail, but it will probably be made clearer by just looking at the examples below.</p>
<p>我会详细介绍这些属性，不过通过以下的样例可能会更加容易理解。</p>
<h4 id="A_lineWidth_example" name="A_lineWidth_example">lineWidth 属性的例子</h4>
<p><img align="right" alt="" class="internal" src="/@api/deki/files/90/=Canvas_linewidth.png">This property sets the current line thickness. Values must be positive numbers. By default this value is set to 1.0 units.</p>
<p>这个属性设置当前绘线的粗细。属性值必须为正数。默认值是1.0。</p>
<p>The line width is the thickness of the stroke centered on the given path. In other words, the area that's drawn extends to half the line width on either side of the path. Because canvas coordinates do not directly reference pixels, special care must be taken to obtain crisp horizontal and vertical lines.</p>
<p>线宽是指给定路径的中心到两边的粗细。换句话说就是在路径的两边各绘制线宽的一半。因为画布的坐标并不和像素直接对应，当需要获得精确的水平或垂直线的时候要特别注意。</p>
<p>In the example below, 10 straight lines are drawn with increasing line widths. The line on the far left is 1.0 units wide. However, the leftmost and all other odd-integer-width thickness lines do not appear crisp, because of the path's positioning.</p>
<p>在下面的例子中，用递增的宽度绘制了10条直线。最左边的线宽1.0单位。并且，最左边的以及所有宽度为奇数的线并不能精确呈现，这就是因为路径的定位问题。</p>
<p><a class="external" href="/samples/canvas-tutorial/4_5_canvas_linewidth.html" title="samples/canvas-tutorial/4_5_canvas_linewidth.html">查看示例</a></p>
<pre class="brush: js  language-js" data-number=""><code class=" language-js"><span class="token keyword">function</span> <span class="token function">draw<span class="token punctuation">(</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> ctx <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById<span class="token punctuation">(</span></span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContext<span class="token punctuation">(</span></span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">+</span>i<span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">beginPath<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">moveTo<span class="token punctuation">(</span></span><span class="token number">5</span><span class="token operator">+</span>i<span class="token operator">*</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">lineTo<span class="token punctuation">(</span></span><span class="token number">5</span><span class="token operator">+</span>i<span class="token operator">*</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">140</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">stroke<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><div class="line-number" data-start="1" style="top: 0px;"></div><div class="line-number" data-start="2" style="top: 19px;"></div><div class="line-number" data-start="3" style="top: 38px;"></div><div class="line-number" data-start="4" style="top: 57px;"></div><div class="line-number" data-start="5" style="top: 76px;"></div><div class="line-number" data-start="6" style="top: 95px;"></div><div class="line-number" data-start="7" style="top: 114px;"></div><div class="line-number" data-start="8" style="top: 133px;"></div><div class="line-number" data-start="9" style="top: 152px;"></div><div class="line-number" data-start="10" style="top: 171px;"></div></code></pre>
<p>Obtaining crisp lines requires understanding how paths are stroked. In the images below, the grid represents the canvas coordinate grid. The squares between gridlines are actual on-screen pixels. In the first grid image below, a rectangle from (2,1) to (5,5) is filled. The entire area between them (light red) falls on pixel boundaries, so the resulting filled rectangle will have crisp edges.</p>
<p>想要获得精确的线条，必须对线条是如何描绘出来的有所理解。见下图，用网格来代表 canvas 的坐标格，每一格对应屏幕上一个像素点。在第一个图中，填充了 (2,1) 至 (5,5) 的矩形，整个区域的边界刚好落在像素边缘上，这样就可以得到的矩形有着清晰的边缘。</p>
<p><img align="middle" alt="" class="internal" src="/@api/deki/files/601/=Canvas-grid.png"></p>
<p>If you consider a path from (3,1) to (3,5) with a line thickness of 1.0, you end up with the situation in the second image. The actual area to be filled (dark blue) only extends halfway into the pixels on either side of the path. An approximation of this has to be rendered, which means that those pixels being only partially shaded, and results in the entire area (the light blue and dark blue) being filled in with a color only half as dark as the actual stroke color. This is what happens with the 1.0 width line in the previous example code.</p>
<p>如果你想要绘制一条从 (3,1) 到 (3,5)，宽度是 1.0 的线条，你会得到像第二幅图一样的结果。实际填充区域（深蓝色部分）仅仅延伸至路径两旁各一半像素。而这半个像素又会以近似的方式进行渲染，这意味着那些像素只是部分着色，结果就是以实际笔触颜色一半色调的颜色来填充整个区域（浅蓝和深蓝的部分）。这就是上例中为何宽度为 1.0 的线并不准确的原因。</p>
<p>To fix this, you have to be very precise in your path creation. Knowing that a 1.0 width line will extend half a unit to either side of the path, creating the path from (3.5,1) to (3.5,5) results in the situation in the third image -- the 1.0 line width ends up completely and precisely filling a single pixel vertical line.</p>
<p>要解决这个问题，你必须对路径施以更加精确的控制。已知粗 1.0 的线条会在路径两边各延伸半像素，那么像第三幅图那样绘制从 (3.5,1) 到 (3.5,5) 的线条，其边缘正好落在像素边界，填充出来就是准确的宽为 1.0 的线条。</p>
<p>For even-width lines, each half ends up being an integer amount of pixels, so you want a path that is between pixels (that is, (3,1) to (3,5)), instead of down the middle of pixels. Also, be aware that in our vertical line example, the Y position still referenced an integer gridline position -- if it hadn't, we would see pixels with half coverage at the endpoints.</p>
<p>对于那些宽度为偶数的线条，每一边的像素数都是整数，那么你想要其路径是落在像素点之间 (如那从 (3,1) 到 (3,5)) 而不是在像素点的中间。同样，注意到那个例子的垂直线条，其 Y 坐标刚好落在网格线上，如果不是的话，端点上同样会出现半渲染的像素点。</p>
<p>While slightly painful when initially working with scalable 2D graphics, paying attention to the pixel grid and the position of paths ensures that your drawings will look correct regardless of scaling or any other transformations involved. A 1.0-width vertical line drawn at the correct position will become a crisp 2-pixel line when scaled up by 2, and will appear at the correct position.</p>
<p style="text-align: justify;">虽然开始处理可缩放的 2D 图形时会有点小痛苦，但是及早注意到像素网格与路径位置之间的关系，可以确保图形在经过缩放或者其它任何变形后都可以保持看上去蛮好：线宽为 1.0 的垂线在放大 2 倍后，会变成清晰的线宽为 2.0，并且出现在它应该出现的位置上。</p>
<h4 id="A_lineCap_example" name="A_lineCap_example"><code>lineCap</code> 属性的例子</h4>
<p><img align="right" alt="" class="internal" src="/@api/deki/files/88/=Canvas_linecap.png">The <code>lineCap</code> property determines how the end points of every line are drawn. There are three possible values for this property and those are: <code>butt</code>, <code>round</code> and <code>square</code>. By default this property is set to <code>butt</code>.</p>
<p>属性 <code>lineCap</code> 的值决定了线段端点显示的样子。它可以为下面的三种的其中之一：<code>butt</code>，<code>round</code> 和 <code>square。默认是</code><code> butt。</code></p>
<p>In this example, I've drawn three lines, each with a different value for the <code>lineCap</code> property. I also added two guides to see the exact differences between the three. Each of these lines starts and ends exactly on these guides.</p>
<p>这个例子里面，我绘制了三条直线，分别赋予不同的 <code>lineCap</code> 值。还有两条辅助线，为了可以看得更清楚它们之间的区别，三条线的起点终点都落在辅助线上。</p>
<p>The line on the left uses the default <code>butt</code> option. You'll notice that it's drawn completely flush with the guides. The second is set to use the <code>round</code> option. This adds a semicircle to the end that has a radius half the width of the line. The line on the right uses the <code>square</code> option. This adds a box with an equal width and half the height of the line thickness.</p>
<p>最左边的线用了默认的 <code>butt</code> 。可以注意到它是与辅助线齐平的。中间的是 <code>round</code> 的效果，端点处加上了半径为一半线宽的半圆。右边的是 <code>square</code> 的效果，端点处加上了等宽且高度为一半线宽的方块。</p>
<p><a class="external" href="/samples/canvas-tutorial/4_6_canvas_linecap.html" title="samples/canvas-tutorial/4_6_canvas_linecap.html">查看示例</a></p>
<pre class="brush: js  language-js" data-number=""><code class=" language-js"><span class="token keyword">function</span> <span class="token function">draw<span class="token punctuation">(</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> ctx <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById<span class="token punctuation">(</span></span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContext<span class="token punctuation">(</span></span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> lineCap <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'butt'</span><span class="token punctuation">,</span><span class="token string">'round'</span><span class="token punctuation">,</span><span class="token string">'square'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

 <span class="token comment" spellcheck="true"> // Draw guides
</span>  ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">'#09f'</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">beginPath<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">moveTo<span class="token punctuation">(</span></span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">lineTo<span class="token punctuation">(</span></span><span class="token number">140</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">moveTo<span class="token punctuation">(</span></span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">140</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">lineTo<span class="token punctuation">(</span></span><span class="token number">140</span><span class="token punctuation">,</span><span class="token number">140</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">stroke<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token comment" spellcheck="true"> // Draw lines
</span>  ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">'black'</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>lineCap<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">15</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span>lineCap <span class="token operator">=</span> lineCap<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">beginPath<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">moveTo<span class="token punctuation">(</span></span><span class="token number">25</span><span class="token operator">+</span>i<span class="token operator">*</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">lineTo<span class="token punctuation">(</span></span><span class="token number">25</span><span class="token operator">+</span>i<span class="token operator">*</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">140</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">stroke<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><div class="line-number" data-start="1" style="top: 0px;"></div><div class="line-number" data-start="2" style="top: 19px;"></div><div class="line-number" data-start="3" style="top: 38px;"></div><div class="line-number" data-start="4" style="top: 57px;"></div><div class="line-number" data-start="5" style="top: 76px;"></div><div class="line-number" data-start="6" style="top: 95px;"></div><div class="line-number" data-start="7" style="top: 114px;"></div><div class="line-number" data-start="8" style="top: 133px;"></div><div class="line-number" data-start="9" style="top: 152px;"></div><div class="line-number" data-start="10" style="top: 171px;"></div><div class="line-number" data-start="11" style="top: 190px;"></div><div class="line-number" data-start="12" style="top: 209px;"></div><div class="line-number" data-start="13" style="top: 228px;"></div><div class="line-number" data-start="14" style="top: 247px;"></div><div class="line-number" data-start="15" style="top: 266px;"></div><div class="line-number" data-start="16" style="top: 285px;"></div><div class="line-number" data-start="17" style="top: 304px;"></div><div class="line-number" data-start="18" style="top: 323px;"></div><div class="line-number" data-start="19" style="top: 342px;"></div><div class="line-number" data-start="20" style="top: 361px;"></div><div class="line-number" data-start="21" style="top: 380px;"></div><div class="line-number" data-start="22" style="top: 399px;"></div><div class="line-number" data-start="23" style="top: 418px;"></div><div class="line-number" data-start="24" style="top: 437px;"></div></code></pre>
<h4 id="A_lineJoin_example" name="A_lineJoin_example"><code>lineJoin</code> 属性的例子</h4>
<p><img align="right" alt="" class="internal" src="/@api/deki/files/89/=Canvas_linejoin.png">The <code>lineJoin</code> property determines how two connecting lines in a shape are joined together. There are three possible values for this property: <code>round</code>, <code>bevel</code> and <code>miter</code>. By default this property is set to <code>miter</code>.</p>
<p><code>lineJoin</code> 的属性值决定了图形中两线段连接处所显示的样子。它可以是这三种之一：<code>round</code>, <code>bevel</code> 和 <code>miter。默认是 </code><code>miter</code><code>。</code></p>
<p>Again I've drawn three different paths, each with a different <code>lineJoin</code> property setting. The top path uses the <code>round</code> option. This setting rounds off the corners of a shape. The radius for these rounded corners is equal to the line width. The second line uses the bevel option and the line at the bottom uses the miter option. When set to <code>miter</code>, lines are joined by extending the outside edges to connect at a single point. This setting is effected by the <code>miterLimit</code> property which is explained below.</p>
<p>这里我同样用三条折线来做例子，分别设置不同的 <code>lineJoin</code> 值。最上面一条是 <code>round</code> 的效果，边角处被磨圆了，圆的半径等于线宽。中间和最下面一条分别是 bevel 和 miter 的效果。当值是 <code>miter </code>的时候，线段会在连接处外侧延伸直至交于一点，延伸效果受到下面将要介绍的 <code>miterLimit</code> 属性的制约。</p>
<p><a class="external" href="/samples/canvas-tutorial/4_7_canvas_linejoin.html" title="samples/canvas-tutorial/4_7_canvas_linejoin.html">查看示例</a></p>
<pre class="brush: js  language-js" data-number=""><code class=" language-js"><span class="token keyword">function</span> <span class="token function">draw<span class="token punctuation">(</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> ctx <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById<span class="token punctuation">(</span></span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContext<span class="token punctuation">(</span></span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> lineJoin <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'round'</span><span class="token punctuation">,</span><span class="token string">'bevel'</span><span class="token punctuation">,</span><span class="token string">'miter'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>lineJoin<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    ctx<span class="token punctuation">.</span>lineJoin <span class="token operator">=</span> lineJoin<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">beginPath<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">moveTo<span class="token punctuation">(</span></span><span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token operator">+</span>i<span class="token operator">*</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">lineTo<span class="token punctuation">(</span></span><span class="token number">35</span><span class="token punctuation">,</span><span class="token number">45</span><span class="token operator">+</span>i<span class="token operator">*</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">lineTo<span class="token punctuation">(</span></span><span class="token number">75</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token operator">+</span>i<span class="token operator">*</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">lineTo<span class="token punctuation">(</span></span><span class="token number">115</span><span class="token punctuation">,</span><span class="token number">45</span><span class="token operator">+</span>i<span class="token operator">*</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">lineTo<span class="token punctuation">(</span></span><span class="token number">155</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token operator">+</span>i<span class="token operator">*</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">stroke<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><div class="line-number" data-start="1" style="top: 0px;"></div><div class="line-number" data-start="2" style="top: 19px;"></div><div class="line-number" data-start="3" style="top: 38px;"></div><div class="line-number" data-start="4" style="top: 57px;"></div><div class="line-number" data-start="5" style="top: 76px;"></div><div class="line-number" data-start="6" style="top: 95px;"></div><div class="line-number" data-start="7" style="top: 114px;"></div><div class="line-number" data-start="8" style="top: 133px;"></div><div class="line-number" data-start="9" style="top: 152px;"></div><div class="line-number" data-start="10" style="top: 171px;"></div><div class="line-number" data-start="11" style="top: 190px;"></div><div class="line-number" data-start="12" style="top: 209px;"></div><div class="line-number" data-start="13" style="top: 228px;"></div><div class="line-number" data-start="14" style="top: 247px;"></div><div class="line-number" data-start="15" style="top: 266px;"></div></code></pre>
<h4 id="A_demo_of_the_miterLimit_property" name="A_demo_of_the_miterLimit_property"><code>miterLimit</code> 属性的演示例子</h4>
<p><img align="right" alt="" class="internal" src="/@api/deki/files/91/=Canvas_miterlimit.png">As you've seen in the previous example, when joining two lines with the <code>miter</code> option, the outside edges of the two joining lines are extended up to the point where they meet. For lines which are at large angles with each other, this point is not far from the inside connection point. However, when the angles between each line decreases, the distance (miter length) between these points increases exponentially.</p>
<p>就如上一个例子所见的应用 <code>miter</code> 的效果，线段的外侧边缘会延伸交汇于一点上。线段直接夹角比较大的，交点不会太远，但当夹角减少时，交点距离会呈指数级增大。</p>
<p>The <code>miterLimit</code> property determines how far the outside connection point can be placed from the inside connection point. If two lines exceed this value, a bevel join will be drawn.</p>
<p><code>miterLimit</code> 属性就是用来设定外延交点与连接点的最大距离，如果交点距离大于此值，连接效果会变成了 bevel。</p>
<p>I've made a little demo in which you can set miterLimit dynamically and see how this effects the shapes on the canvas. The blue lines show where the start and endpoints for each of the lines in the zig-zag pattern are.</p>
<p>我做了一个演示页面，你可以动手改变 miterLimit 的值，观察其影响效果。蓝色辅助线显示锯齿折线段的起点与终点所在的位置。</p>
<p><a class="external" href="/samples/canvas-tutorial/4_8_canvas_miterlimit.html" title="samples/canvas-tutorial/4_8_canvas_miterlimit.html">去看看演示</a></p>
<h2 id="Gradients" name="Gradients">渐变 Gradients</h2>
<p>Just like any normal drawing program, we can fill and stroke shapes using linear and radial gradients. We create a <code>canvasGradient</code> object by using one of the following methods. We use this object to assign it to the <code>fillStyle</code> or <code>strokeStyle</code> properties.</p>
<p>就好像一般的绘图软件一样，我们可以用线性或者径向的渐变来填充或描边。我们用下面的方法新建一个 <code>canvasGradient</code> 对象，并且赋给图形的 <code>fillStyle</code> 或 <code>strokeStyle</code> 属性。</p>
<div style="border: 1px solid rgb(208, 221, 158); background: rgb(239, 248, 206) none repeat scroll 0% 0%; padding-left: 10px;">
  <p><code><strong>createLinearGradient</strong>(x1,y1,x2,y2)</code><br>
    <code><strong>createRadialGradient</strong>(x1,y1,r1,x2,y2,r2)</code></p>
</div>
<p>The <code>createLinearGradient</code> method takes four arguments representing the starting point (x1,y1) and end point (x2,y2) of the gradient.<br>
  The <code>createRadialGradient</code> method takes six arguments. The first three arguments define a circle with coordinates (x1,y1) and radius r1 and the second a circle with coordinates (x2,y2) and radius r2.</p>
<p><code>createLinearGradient</code> 方法接受 4 个参数，表示渐变的起点 (x1,y1) 与终点 (x2,y2)。<br>
  <code>createRadialGradient</code> 方法接受 6 个参数，前三个定义一个以 (x1,y1) 为原点，半径为 r1 的圆，后三个参数则定义另一个以 (x2,y2) 为原点，半径为 r2 的圆。</p>
<pre class="brush: js  language-js" data-number=""><code class=" language-js"><span class="token keyword">var</span> lineargradient <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">createLinearGradient<span class="token punctuation">(</span></span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> radialgradient <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">createRadialGradient<span class="token punctuation">(</span></span><span class="token number">75</span><span class="token punctuation">,</span><span class="token number">75</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">75</span><span class="token punctuation">,</span><span class="token number">75</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span><div class="line-number" data-start="1" style="top: 0px;"></div><div class="line-number" data-start="2" style="top: 19px;"></div></code></pre>
<p>Once we've created a <code>canvasGradient</code> object we can assign colors to it by using the <code>addColorStop</code> method.</p>
<p>创建出 <code>canvasGradient</code> 对象后，我们就可以用 <code>addColorStop</code> 方法给它上色了。</p>
<div style="border: 1px solid rgb(208, 221, 158); background: rgb(239, 248, 206) none repeat scroll 0% 0%; padding-left: 10px;">
  <p><code><strong>addColorStop</strong>(position, color)</code></p>
</div>
<p>This method takes two arguments. The <code>position</code> must be a number between 0.0 and 1.0 and defines the relative position of the color in the gradient. Setting this to 0.5 for instance would place the color precisely in the middle of the gradient. The <code>color</code> argument must be a string representing a CSS color (ie #FFF, rgba(0,0,0,1),etc).</p>
<p><code>addColorStop</code> 方法接受 2 个参数，<code>position</code> 参数必须是一个 0.0 与 1.0 之间的数值，表示渐变中颜色所在的相对位置。例如，0.5 表示颜色会出现在正中间。<code>color</code> 参数必须是一个有效的 CSS 颜色值（如 #FFF， rgba(0,0,0,1)，等等）。</p>
<p>You can add as many color stops to a gradient as you need. Below is a very simple linear gradient from white to black.</p>
<p>你可以根据需要添加任意多个色标（color stops）。下面是最简单的线性黑白渐变的例子。</p>
<pre class="brush: js  language-js" data-number=""><code class=" language-js"><span class="token keyword">var</span> lineargradient <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">createLinearGradient<span class="token punctuation">(</span></span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
lineargradient<span class="token punctuation">.</span><span class="token function">addColorStop<span class="token punctuation">(</span></span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">'white'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
lineargradient<span class="token punctuation">.</span><span class="token function">addColorStop<span class="token punctuation">(</span></span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'black'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><div class="line-number" data-start="1" style="top: 0px;"></div><div class="line-number" data-start="2" style="top: 19px;"></div><div class="line-number" data-start="3" style="top: 38px;"></div></code></pre>
<h4 id="A_createLinearGradient_example" name="A_createLinearGradient_example"><code>createLinearGradient</code> 的例子</h4>
<p><img align="right" alt="" class="internal" src="/@api/deki/files/87/=Canvas_lineargradient.png">In this example, I've created two different gradients. In the first, I create the background gradient. As you can see, I've assigned two colors at the same position. You do this to make very sharp color transitions - in this case from white to green. Normally, it doesn't matter in what order you define the color stops, but in this special case, it does significantly. If you keep the assignments in the order you want them to appear, this won't be a problem.</p>
<p>本例中，我弄了两种不同的渐变。第一种是背景色渐变，你会发现，我给同一位置设置了两种颜色，你也可以用这来实现突变的效果，就像这里从白色到绿色的突变。一般情况下，色标的定义是无所谓顺序的，但是色标位置重复时，顺序就变得非常重要了。所以，保持色标定义顺序和它理想的顺序一致，结果应该没什么大问题。</p>
<p>In the second gradient, I didn't assign the starting color (at position 0.0) since it wasn't strictly necessary. Assigning the black color at position 0.5 automatically makes the gradient, from the start to this stop, black.</p>
<p>第二种渐变，我并不是从 0.0 位置开始定义色标，因为那并不是那么严格的。在 0.5 处设一黑色色标，渐变会默认认为从起点到色标之间都是黑色。</p>
<p>As you can see here, both the <code>strokeStyle</code> and <code>fillStyle</code> properties can accept a <code>canvasGradient</code> object as valid input.</p>
<p>你会发现，<code>strokeStyle</code> 和 <code>fillStyle</code> 属性都可以接受 <code>canvasGradient</code> 对象。</p>
<p><a class="external" href="/samples/canvas-tutorial/4_9_canvas_lineargradient.html" title="samples/canvas-tutorial/4_9_canvas_lineargradient.html">查看示例</a></p>
<pre class="brush: js  language-js" data-number=""><code class=" language-js"><span class="token keyword">function</span> <span class="token function">draw<span class="token punctuation">(</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> ctx <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById<span class="token punctuation">(</span></span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContext<span class="token punctuation">(</span></span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token comment" spellcheck="true"> // Create gradients
</span>  <span class="token keyword">var</span> lingrad <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">createLinearGradient<span class="token punctuation">(</span></span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  lingrad<span class="token punctuation">.</span><span class="token function">addColorStop<span class="token punctuation">(</span></span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'#00ABEB'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  lingrad<span class="token punctuation">.</span><span class="token function">addColorStop<span class="token punctuation">(</span></span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token string">'#fff'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token comment" spellcheck="true"> //lingrad.addColorStop(0.5, '#26C000');
</span> <span class="token comment" spellcheck="true"> //lingrad.addColorStop(1, '#fff');
</span>
  <span class="token keyword">var</span> lingrad2 <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">createLinearGradient<span class="token punctuation">(</span></span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">95</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  lingrad2<span class="token punctuation">.</span><span class="token function">addColorStop<span class="token punctuation">(</span></span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token string">'#000'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  lingrad2<span class="token punctuation">.</span><span class="token function">addColorStop<span class="token punctuation">(</span></span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'rgba(0,0,0,0)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token comment" spellcheck="true"> // assign gradients to fill and stroke styles
</span>  ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> lingrad<span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> lingrad2<span class="token punctuation">;</span>
  
 <span class="token comment" spellcheck="true"> // draw shapes
</span>  ctx<span class="token punctuation">.</span><span class="token function">fillRect<span class="token punctuation">(</span></span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">130</span><span class="token punctuation">,</span><span class="token number">130</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">strokeRect<span class="token punctuation">(</span></span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><div class="line-number" data-start="1" style="top: 0px;"></div><div class="line-number" data-start="2" style="top: 19px;"></div><div class="line-number" data-start="3" style="top: 38px;"></div><div class="line-number" data-start="4" style="top: 57px;"></div><div class="line-number" data-start="5" style="top: 76px;"></div><div class="line-number" data-start="6" style="top: 95px;"></div><div class="line-number" data-start="7" style="top: 114px;"></div><div class="line-number" data-start="8" style="top: 133px;"></div><div class="line-number" data-start="9" style="top: 152px;"></div><div class="line-number" data-start="10" style="top: 171px;"></div><div class="line-number" data-start="11" style="top: 190px;"></div><div class="line-number" data-start="12" style="top: 209px;"></div><div class="line-number" data-start="13" style="top: 228px;"></div><div class="line-number" data-start="14" style="top: 247px;"></div><div class="line-number" data-start="15" style="top: 266px;"></div><div class="line-number" data-start="16" style="top: 285px;"></div><div class="line-number" data-start="17" style="top: 304px;"></div><div class="line-number" data-start="18" style="top: 323px;"></div><div class="line-number" data-start="19" style="top: 342px;"></div><div class="line-number" data-start="20" style="top: 361px;"></div><div class="line-number" data-start="21" style="top: 380px;"></div><div class="line-number" data-start="22" style="top: 399px;"></div><div class="line-number" data-start="23" style="top: 418px;"></div></code></pre>
<h4 id="A_createRadialGradient_example" name="A_createRadialGradient_example"><code>createRadialGradient</code> 的例子</h4>
<p><img align="right" alt="" class="internal" src="/@api/deki/files/96/=Canvas_radialgradient.png">In this example, I've defined four different radial gradients. Because we have control over the start and closing points of the gradient, we can achieve more complex effects than we would normally have in the 'classic' radial gradients we see in, for instance, Photoshop. (i.e. a gradient with a single center point where the gradient expands outward in a circular shape.)</p>
<p>这个例子，我定义了 4 个不同的径向渐变。由于可以控制渐变的起始与结束点，所以我们可以实现一些比（如在 Photoshop 中所见的）经典的径向渐变更为复杂的效果。（经典的径向渐变是只有一个中心点，简单地由中心点向外围的圆形扩张）</p>
<p>In this case, I've offset the starting point slightly from the end point to achieve a spherical 3D effect. It's best to try to avoid letting the inside and outside circles overlap because this results in strange effects which are hard to predict.</p>
<p>这里，我让起点稍微偏离终点，这样可以达到一种球状 3D 效果。但最好不要让里圆与外圆部分交叠，那样会产生什么效果就真是不得而知了。</p>
<p>The last color stop in each of the four gradients uses a fully transparent color. If you want to have a nice transition from this to the previous color stop, both colors should be equal. This isn't very obvious from the code because I've used two different CSS color methods, but in the first gradient <code>#019F62 = rgba(1,159,98,1)</code></p>
<p>4 个径向渐变效果的最后一个色标都是透明色。如果想要两色标直接的过渡柔和一些，只要两个颜色值一致就可以了。代码里面看不出来，是因为我用了两种不同的颜色表示方法，但其实是相同的<span style="font-family: monospace;">，</span><code>#019F62 = rgba(1,159,98,1)。</code></p>
<p><a class="external" href="/samples/canvas-tutorial/4_10_canvas_radialgradient.html" title="samples/canvas-tutorial/4_10_canvas_radialgradient.html">查看示例</a></p>
<pre class="brush: js  language-js" data-number=""><code class=" language-js"><span class="token keyword">function</span> <span class="token function">draw<span class="token punctuation">(</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> ctx <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById<span class="token punctuation">(</span></span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContext<span class="token punctuation">(</span></span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token comment" spellcheck="true"> // Create gradients
</span>  <span class="token keyword">var</span> radgrad <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">createRadialGradient<span class="token punctuation">(</span></span><span class="token number">45</span><span class="token punctuation">,</span><span class="token number">45</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">52</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  radgrad<span class="token punctuation">.</span><span class="token function">addColorStop<span class="token punctuation">(</span></span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'#A7D30C'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  radgrad<span class="token punctuation">.</span><span class="token function">addColorStop<span class="token punctuation">(</span></span><span class="token number">0.9</span><span class="token punctuation">,</span> <span class="token string">'#019F62'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  radgrad<span class="token punctuation">.</span><span class="token function">addColorStop<span class="token punctuation">(</span></span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'rgba(1,159,98,0)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token keyword">var</span> radgrad2 <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">createRadialGradient<span class="token punctuation">(</span></span><span class="token number">105</span><span class="token punctuation">,</span><span class="token number">105</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">112</span><span class="token punctuation">,</span><span class="token number">120</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  radgrad2<span class="token punctuation">.</span><span class="token function">addColorStop<span class="token punctuation">(</span></span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'#FF5F98'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  radgrad2<span class="token punctuation">.</span><span class="token function">addColorStop<span class="token punctuation">(</span></span><span class="token number">0.75</span><span class="token punctuation">,</span> <span class="token string">'#FF0188'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  radgrad2<span class="token punctuation">.</span><span class="token function">addColorStop<span class="token punctuation">(</span></span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'rgba(255,1,136,0)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> radgrad3 <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">createRadialGradient<span class="token punctuation">(</span></span><span class="token number">95</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">102</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  radgrad3<span class="token punctuation">.</span><span class="token function">addColorStop<span class="token punctuation">(</span></span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'#00C9FF'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  radgrad3<span class="token punctuation">.</span><span class="token function">addColorStop<span class="token punctuation">(</span></span><span class="token number">0.8</span><span class="token punctuation">,</span> <span class="token string">'#00B5E2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  radgrad3<span class="token punctuation">.</span><span class="token function">addColorStop<span class="token punctuation">(</span></span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'rgba(0,201,255,0)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> radgrad4 <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">createRadialGradient<span class="token punctuation">(</span></span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">140</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  radgrad4<span class="token punctuation">.</span><span class="token function">addColorStop<span class="token punctuation">(</span></span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'#F4F201'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  radgrad4<span class="token punctuation">.</span><span class="token function">addColorStop<span class="token punctuation">(</span></span><span class="token number">0.8</span><span class="token punctuation">,</span> <span class="token string">'#E4C700'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  radgrad4<span class="token punctuation">.</span><span class="token function">addColorStop<span class="token punctuation">(</span></span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'rgba(228,199,0,0)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
 <span class="token comment" spellcheck="true"> // draw shapes
</span>  ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> radgrad4<span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">fillRect<span class="token punctuation">(</span></span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> radgrad3<span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">fillRect<span class="token punctuation">(</span></span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> radgrad2<span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">fillRect<span class="token punctuation">(</span></span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> radgrad<span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">fillRect<span class="token punctuation">(</span></span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><div class="line-number" data-start="1" style="top: 0px;"></div><div class="line-number" data-start="2" style="top: 19px;"></div><div class="line-number" data-start="3" style="top: 38px;"></div><div class="line-number" data-start="4" style="top: 57px;"></div><div class="line-number" data-start="5" style="top: 76px;"></div><div class="line-number" data-start="6" style="top: 95px;"></div><div class="line-number" data-start="7" style="top: 114px;"></div><div class="line-number" data-start="8" style="top: 133px;"></div><div class="line-number" data-start="9" style="top: 152px;"></div><div class="line-number" data-start="10" style="top: 171px;"></div><div class="line-number" data-start="11" style="top: 190px;"></div><div class="line-number" data-start="12" style="top: 209px;"></div><div class="line-number" data-start="13" style="top: 228px;"></div><div class="line-number" data-start="14" style="top: 247px;"></div><div class="line-number" data-start="15" style="top: 266px;"></div><div class="line-number" data-start="16" style="top: 285px;"></div><div class="line-number" data-start="17" style="top: 304px;"></div><div class="line-number" data-start="18" style="top: 323px;"></div><div class="line-number" data-start="19" style="top: 342px;"></div><div class="line-number" data-start="20" style="top: 361px;"></div><div class="line-number" data-start="21" style="top: 380px;"></div><div class="line-number" data-start="22" style="top: 399px;"></div><div class="line-number" data-start="23" style="top: 418px;"></div><div class="line-number" data-start="24" style="top: 437px;"></div><div class="line-number" data-start="25" style="top: 456px;"></div><div class="line-number" data-start="26" style="top: 475px;"></div><div class="line-number" data-start="27" style="top: 494px;"></div><div class="line-number" data-start="28" style="top: 513px;"></div><div class="line-number" data-start="29" style="top: 532px;"></div><div class="line-number" data-start="30" style="top: 551px;"></div><div class="line-number" data-start="31" style="top: 570px;"></div><div class="line-number" data-start="32" style="top: 589px;"></div><div class="line-number" data-start="33" style="top: 608px;"></div><div class="line-number" data-start="34" style="top: 627px;"></div></code></pre>
<h2 id="Patterns" name="Patterns">图案 Patterns</h2>
<p>In one of the examples on the previous page, I used a series of loops to create a pattern of images. There is, however, a much simpler method: the <code>createPattern</code> method.</p>
<p>上一节的一个例子里面，我用了循环来实现图案的效果。其实，有一个更加简单的方法：<code>createPattern。</code></p>
<div style="border: 1px solid rgb(208, 221, 158); background: rgb(239, 248, 206) none repeat scroll 0% 0%; padding-left: 10px;">
  <p><code><strong>createPattern</strong>(image,type)</code></p>
</div>
<p>This method takes two arguments. Image is either a reference to an <code>Image</code> object or a different canvas element. Type must be a string containing one of the following values: <code>repeat</code>, <code>repeat-x</code>, <code>repeat-y</code> and <code>no-repeat</code>.</p>
<p>该方法接受两个参数。Image 可以是一个 <code>Image</code> 对象的引用，或者另一个 canvas 对象。Type 必须是下面的字符串值之一：<code>repeat</code>，<code>repeat-x</code>，<code>repeat-y</code> 和 <code>no-repeat</code>。</p>
<div class="note">
  <strong>注意:</strong> 用 canvas 对象作为 <code>Image</code> 参数在 Firefox 1.5 (Gecko 1.8) 中是无效的。</div>
<p>We use this method to create a Pattern object which is very similar to the gradient methods we've seen above. Once we've created a pattern, we can assign it to the <code>fillStyle</code> or <code>strokeStyle</code> properties.</p>
<p>图案的应用跟渐变很类似的，创建出一个 pattern 之后，赋给 <code>fillStyle</code> 或 <code>strokeStyle</code> 属性即可。</p>
<pre class="brush: js  language-js" data-number=""><code class=" language-js"><span class="token keyword">var</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
img<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'someimage.png'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> ptrn <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">createPattern<span class="token punctuation">(</span></span>img<span class="token punctuation">,</span><span class="token string">'repeat'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><div class="line-number" data-start="1" style="top: 0px;"></div><div class="line-number" data-start="2" style="top: 19px;"></div><div class="line-number" data-start="3" style="top: 38px;"></div></code></pre>
<p><strong>Note:</strong> Unlike the drawImage method, you must make sure the image you use is loaded before calling this method or the pattern may be drawn incorrectly.</p>
<p><strong>注意：</strong>与 drawImage 有点不同，你需要确认 image 对象已经装载完毕，否则图案可能效果不对的。</p>
<p><strong>Note:</strong> Firefox currently only supports the <code>repeat</code> property. If you assign anything else, you won't see any changes.</p>
<p><strong>注意：</strong>Firefox 目前只支持属性值<code>repeat</code> 。如果赋其它值，什么效果都没有的。</p>
<h4 id="A_createPattern_example" name="A_createPattern_example"><code>createPattern</code> 的例子</h4>
<p>In this last example, I created a pattern which I assigned to the <code>fillStyle</code> property. The only thing worth noting is the use of the Image object <code>onload</code> handler. This is to make sure the image is loaded before it is assigned to the pattern.</p>
<p>这最后的例子，我创建一个图案然后赋给了 <code>fillStyle</code> 属性。值得一提的是，使用 Image 对象的 <code>onload</code> handler 来确保设置图案之前图像已经装载完毕。</p>
<p><a class="external" href="/samples/canvas-tutorial/4_11_canvas_createpattern.html" title="samples/canvas-tutorial/4_11_canvas_createpattern.html">查看示例</a></p>
<p><img align="right" alt="Source image" class="internal" src="/@api/deki/files/75/=Canvas_createpattern.png"></p>
<pre class="brush: js  language-js" data-number=""><code class=" language-js"><span class="token keyword">function</span> <span class="token function">draw<span class="token punctuation">(</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> ctx <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById<span class="token punctuation">(</span></span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContext<span class="token punctuation">(</span></span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token comment" spellcheck="true"> // create new image object to use as pattern
</span>  <span class="token keyword">var</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  img<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'images/wallpaper.png'</span><span class="token punctuation">;</span>
  img<span class="token punctuation">.</span>onload <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

   <span class="token comment" spellcheck="true"> // create pattern
</span>    <span class="token keyword">var</span> ptrn <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">createPattern<span class="token punctuation">(</span></span>img<span class="token punctuation">,</span><span class="token string">'repeat'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> ptrn<span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">fillRect<span class="token punctuation">(</span></span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><div class="line-number" data-start="1" style="top: 0px;"></div><div class="line-number" data-start="2" style="top: 19px;"></div><div class="line-number" data-start="3" style="top: 38px;"></div><div class="line-number" data-start="4" style="top: 57px;"></div><div class="line-number" data-start="5" style="top: 76px;"></div><div class="line-number" data-start="6" style="top: 95px;"></div><div class="line-number" data-start="7" style="top: 114px;"></div><div class="line-number" data-start="8" style="top: 133px;"></div><div class="line-number" data-start="9" style="top: 152px;"></div><div class="line-number" data-start="10" style="top: 171px;"></div><div class="line-number" data-start="11" style="top: 190px;"></div><div class="line-number" data-start="12" style="top: 209px;"></div><div class="line-number" data-start="13" style="top: 228px;"></div><div class="line-number" data-start="14" style="top: 247px;"></div><div class="line-number" data-start="15" style="top: 266px;"></div></code></pre>
<h2 id=".E9.98.B4.E5.BD.B1_Shadows">阴影 Shadows</h2>
<p></p><div class="blockIndicator standardNote standardNoteBlock"> 
    <p><a class="external" href="http://developer.mozilla.org/zh-CN/docs/Mozilla/Firefox/Releases/3">Firefox 3 note</a></p> 
    <p style="font-weight: 400;"></p> 
</div><p></p>
<p>Firefox 3.5 (Gecko 1.9.1)&nbsp;introduced support for shadows in canvases.&nbsp; Using shadows involves just four properties:</p>
<p>Firefox 3.5 (Gecko 1.9.1) 在 canvas 中加入了对阴影的支持，就 4 个属性。</p>
<div style="border: 1px solid rgb(208, 221, 158); background: rgb(239, 248, 206) none repeat scroll 0% 0%; padding-left: 10px;">
  <p><code><strong>shadowOffsetX</strong> = float</code><br>
    <code><strong>shadowOffsetY</strong> = </code><code>float</code><br>
    <code><strong>shadowBlur</strong> = </code><code>float</code><br>
    <code><strong>shadowColor</strong> = </code><code>color</code></p>
</div>
<p><code>shadowOffsetX</code> and <code>shadowOffsetY</code>&nbsp;indicate how far the shadow should extend from the object in the X and Y&nbsp;directions; these values aren't affected by the current transformation matrix.&nbsp; Use negative values to cause the shadow to extend up or to the left, and positive values to cause the shadow to extend down or to the right.&nbsp; These are both 0 by default.</p>
<p><code>shadowOffsetX</code> <span style="font-family: monospace;">和 </span><code>shadowOffsetY </code>用来设定阴影在 X 和 Y 轴的延伸距离，它们是不受变换矩阵所影响的。负值表示阴影会往上或左延伸，正值则表示会往下或右延伸，他们默认都是 0。</p>
<p><code>shadowBlur</code> indicates the size of the blurring effect; this value doesn't correspond to a number of pixels and is not affected by the current transformation matrix.&nbsp; The default value is 0.</p>
<p><code>shadowBlur</code> 用于设定阴影的模糊程度，其数值并不跟像素数量挂钩，也不受变换矩阵的影响，默认为 0。</p>
<p><code>shadowColor</code> is a standard CSS&nbsp;color value indicating the color of the shadow effect; by default, it is fully-transparent black.</p>
<p><code>shadowColor</code> 用于设定阴影效果的延伸，值可以是标准的 CSS 颜色值，默认是全透明的黑色。</p>
<h3 id=".E6.96.87.E5.AD.97.E9.98.B4.E5.BD.B1.E7.9A.84.E4.BE.8B.E5.AD.90">文字阴影的例子</h3>
<p>This example draws a text string with a shadowing effect.</p>
<p>这个例子绘制了带阴影效果的文字。</p>
<p><a class="internal" href="/@api/deki/files/2906/=shadowed-text.html" title="/@api/deki/files/2906/=shadowed-text.html">查看示例</a></p>
<p><img align="right" alt="Source image" class="internal" src="/@api/deki/files/2907/=shadowed-string.png"></p>
<pre class="brush: js  language-js" data-number=""><code class=" language-js"><span class="token keyword">function</span> <span class="token function">draw<span class="token punctuation">(</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> ctx <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById<span class="token punctuation">(</span></span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContext<span class="token punctuation">(</span></span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  ctx<span class="token punctuation">.</span>shadowOffsetX <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span>shadowOffsetY <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span>shadowBlur <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span>shadowColor <span class="token operator">=</span> <span class="token string">"rgba(0, 0, 0, 0.5)"</span><span class="token punctuation">;</span>
 
  ctx<span class="token punctuation">.</span>font <span class="token operator">=</span> <span class="token string">"20px Times New Roman"</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">"Black"</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">fillText<span class="token punctuation">(</span></span><span class="token string">"Sample String"</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><div class="line-number" data-start="1" style="top: 0px;"></div><div class="line-number" data-start="2" style="top: 19px;"></div><div class="line-number" data-start="3" style="top: 38px;"></div><div class="line-number" data-start="4" style="top: 57px;"></div><div class="line-number" data-start="5" style="top: 76px;"></div><div class="line-number" data-start="6" style="top: 95px;"></div><div class="line-number" data-start="7" style="top: 114px;"></div><div class="line-number" data-start="8" style="top: 133px;"></div><div class="line-number" data-start="9" style="top: 152px;"></div><div class="line-number" data-start="10" style="top: 171px;"></div><div class="line-number" data-start="11" style="top: 190px;"></div><div class="line-number" data-start="12" style="top: 209px;"></div></code></pre>
<p></p><div class="prevnext" style="text-align: right;"> 
    <p><a href="/zh-CN/docs/Canvas_tutorial:Using_images" style="float: left;">« 上一页</a><a href="/zh-CN/docs/Canvas_tutorial/Transformations">下一页  »</a></p> 
</div><p></p>
<p></p>
                                    </article>