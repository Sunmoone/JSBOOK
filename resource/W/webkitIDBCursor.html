<div class="_content"><div class="_page _mdn"><h1>IDBCursor</h1> <div class="summary"> <p>The <code>IDBCursor</code> interface of the <a href="https://developer.mozilla.org/en-US/docs/IndexedDB">IndexedDB API</a> represents a <a href="https://developer.mozilla.org/en-US/docs/IndexedDB/Basic_Concepts_Behind_IndexedDB#gloss_cursor">cursor</a> for traversing or iterating over multiple records in a database.</p> </div> <p>The cursor has a source that indicates which index or object store it is iterating. It has a position within the range, and moves in a direction that is increasing or decreasing in the order of record keys. The cursor enables an application to asynchronously process all the records in the cursor's range.</p> <p>You can have an unlimited number of cursors at the same time. You always get the same <code>IDBCursor</code> object representing a given cursor. Operations are performed on the underlying index or object store.</p> <h2 id="Methods">Methods</h2> <dl>
<dt> <a href="idbcursor.advance" title="This method may raise a DOMException with a DOMError of the following types:"><code>IDBCursor.advance</code></a>
</dt> <dd> Sets the number times a cursor should move its position forward.</dd> <dt> <a href="idbcursor.continue" title="This method may raise a DOMException with a DOMError of the following types:"><code>IDBCursor.continue</code></a>
</dt> <dd> Advances the cursor to the next position along its direction, to the item whose key matches the optional <code>key</code> parameter.</dd> <dt> <a href="idbcursor.delete" title="This method may raise a DOMException with a DOMError of the following types:"><code>IDBCursor.delete</code></a>
</dt> <dd> Returns an <a href="idbrequest" title="The request object does not initially contain any information about the result of the operation, but once information becomes available, an event is fired on the request, and the information becomes available through the properties of the IDBRequest instance."><code>IDBRequest</code></a> object, and, in a separate thread, deletes the record at the cursor's position, without changing the cursor's position.</dd> <dt> <a href="idbcursor.update" title="IDBRequest"><code>IDBCursor.update</code></a>
</dt> <dd> Returns an <a href="idbrequest" title="The request object does not initially contain any information about the result of the operation, but once information becomes available, an event is fired on the request, and the information becomes available through the properties of the IDBRequest instance."><code>IDBRequest</code></a> object, and, in a separate thread, updates the value at the current position of the cursor in the object store.</dd> </dl><h2 id="Properties">Properties</h2> <dl>
<dt> <a href="idbcursor.source" title="The IDBObjectStore or IDBIndex that the cursor is iterating over."><code>IDBCursor.source</code></a> <span class="inlineIndicator readOnly readOnlyInline" title="This value may not be changed.">Read only </span>
</dt> <dd> On getting, this object returns the <a href="idbobjectstore" title="To learn more about various topics, see the following"><code>IDBObjectStore</code></a> or <a href="idbindex" title="You can retrieve records in an object store through their keys or by using an index (cursors provide a third way: see IDBCursor). An index lets you look up records in an object store using properties of the values in the object stores records."><code>IDBIndex</code></a> that the cursor is iterating. This function never returns null or throws an exception, even if the cursor is currently being iterated, has iterated past its end, or its transaction is not active.</dd> <dt> <a href="idbcursor.direction" title="A string indicating the direction in which the cursor is traversing the data:"><code>IDBCursor.direction</code></a> <span class="inlineIndicator readOnly readOnlyInline" title="This value may not be changed.">Read only </span>
</dt> <dd> Is a <a href="domstring" title="A UTF-16 String. As JavaScript already uses such strings, DOMString is mapped directly to a String."><code>DOMString</code></a> that, on getting, returns the direction of traversal of the cursor. See <a href="#const_next">Constants</a> for possible values.</dd> <dt> <a href="idbcursor.key" title="// Open our object store and then get a cursor list of all the different data items in the IDB to iterate through
 &nbsp;&nbsp;&nbsp; var objectStore = db.transaction('toDoList').objectStore('toDoList');
 &nbsp;&nbsp;&nbsp; objectStore.openCursor().onsuccess = function(event) {
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var cursor = event.target.result;
 &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Find a cursor that you want to update by querying the key of the cursor
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(cursor.key == &quot;Walk the dog&quot;) {
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cursor.value.hours = &quot;19&quot;;
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cursor.value.minutes = &quot;30&quot;;
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var request = cursor.update();
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; request.onsuccess = function() {
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // take further action once the record is successfully updated
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
 &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cursor.continue();
 &nbsp;&nbsp;&nbsp; }"><code>IDBCursor.key</code></a> <span class="inlineIndicator readOnly readOnlyInline" title="This value may not be changed.">Read only </span>
</dt> <dd> Returns the key for the record at the cursor's position. If the cursor is outside its range, this is set to <code>undefined</code>. The cursor's key can be any data type.</dd> <dt> <a href="idbcursor.primarykey" title="A value, of any data type."><code>IDBCursor.primaryKey</code></a> <span class="inlineIndicator readOnly readOnlyInline" title="This value may not be changed.">Read only </span>
</dt> <dd> Returns the cursor's current effective key. If the cursor is currently being iterated or has iterated outside its range, this is set to <code>undefined</code>. The cursor's primary key can be any data type.</dd> </dl><h2 id="Constants" name="Constants">Constants</h2> <div class="overheadIndicator obsolete obsoleteHeader"><p><strong>Obsolete since Gecko 25 (Firefox 25 / Thunderbird 25 / SeaMonkey 2.22)</strong><br>This feature is obsolete. Although it is still supported by browsers, its usage is discouraged in new projects. Try to avoid using it.</p></div> <div class="warning"> <p>These constants are no longer available. You should use directly the string constants instead. (<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=891944" title="FIXED: Move IDBCursor to WebIDL">bug 891944</a>)</p> </div> <ul>
<li>
<code>NEXT </code>: <code>"next"</code> : The cursor shows all records, including duplicates. It starts at the lower bound of the key range and moves upwards (monotonically increasing in the order of keys).</li> <li>
<code>NEXTUNIQUE</code> : <code>"nextunique"</code> : The cursor shows all records, excluding duplicates. If multiple records exist with the same key, only the first one iterated is retrieved. It starts at the lower bound of the key range and moves upwards.</li> <li>
<code>PREV </code>: <code>"prev"</code> : The cursor shows all records, including duplicates. It starts at the upper bound of the key range and moves downwards (monotonically decreasing in the order of keys).</li> <li>
<code>PREVUNIQUE </code>: <code>"prevunique"</code> : The cursor shows all records, excluding duplicates. If multiple records exist with the same key, only the first one iterated is retrieved. It starts at the upper bound of the key range and moves downwards.</li> </ul><h2 id="Example">Example</h2> <p>In the following code snippet, we open a transaction and manipulate a data set using a cursor. You can see that the cursor allows us to create a special <code>if ... else</code> structure, which runs while the cursor still has data inside it to iterate through (<code>if(cursor)</code>). Also, the cursor does not require us to select the data based on any key; we can just grab all of it. Also note that in each iteration of the loop, you can grab values from the current cursor object using <code>cursor.value.foo</code>.</p> <pre class=" language-javascript"><span class="token comment" spellcheck="true">// Open our object store and then get a cursor list of all the different data items in the IDB to iterate through
</span>    <span class="token keyword">var</span> objectStore <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">transaction<span class="token punctuation">(</span></span><span class="token string">'toDoList'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">objectStore<span class="token punctuation">(</span></span><span class="token string">'toDoList'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    objectStore<span class="token punctuation">.</span><span class="token function">openCursor<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>onsuccess <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> cursor <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>result<span class="token punctuation">;</span>
       <span class="token comment" spellcheck="true"> // if there is still another cursor to go, keep runing this code
</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>cursor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token comment" spellcheck="true"> // create a list item to put each data item inside when displaying it
</span>          <span class="token keyword">var</span> listItem <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement<span class="token punctuation">(</span></span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          
         <span class="token comment" spellcheck="true"> // check which suffix the deadline day of the month needs
</span>          <span class="token keyword">if</span><span class="token punctuation">(</span>cursor<span class="token punctuation">.</span>value<span class="token punctuation">.</span>day <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">||</span> cursor<span class="token punctuation">.</span>value<span class="token punctuation">.</span>day <span class="token operator">==</span> <span class="token number">21</span> <span class="token operator">||</span> cursor<span class="token punctuation">.</span>value<span class="token punctuation">.</span>day <span class="token operator">==</span> <span class="token number">31</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            daySuffix <span class="token operator">=</span> <span class="token string">"st"</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>cursor<span class="token punctuation">.</span>value<span class="token punctuation">.</span>day <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">||</span> cursor<span class="token punctuation">.</span>value<span class="token punctuation">.</span>day <span class="token operator">==</span> <span class="token number">22</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            daySuffix <span class="token operator">=</span> <span class="token string">"nd"</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>cursor<span class="token punctuation">.</span>value<span class="token punctuation">.</span>day <span class="token operator">==</span> <span class="token number">3</span> <span class="token operator">||</span> cursor<span class="token punctuation">.</span>value<span class="token punctuation">.</span>day <span class="token operator">==</span> <span class="token number">23</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            daySuffix <span class="token operator">=</span> <span class="token string">"rd"</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            daySuffix <span class="token operator">=</span> <span class="token string">"th"</span><span class="token punctuation">;</span>  
          <span class="token punctuation">}</span>
          
         <span class="token comment" spellcheck="true"> // build the to-do list entry and put it into the list item via innerHTML.
</span>          listItem<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> cursor<span class="token punctuation">.</span>value<span class="token punctuation">.</span>taskTitle <span class="token operator">+</span> <span class="token string">' — '</span> <span class="token operator">+</span> cursor<span class="token punctuation">.</span>value<span class="token punctuation">.</span>hours <span class="token operator">+</span> <span class="token string">':'</span> <span class="token operator">+</span> cursor<span class="token punctuation">.</span>value<span class="token punctuation">.</span>minutes <span class="token operator">+</span> <span class="token string">', '</span> <span class="token operator">+</span> cursor<span class="token punctuation">.</span>value<span class="token punctuation">.</span>month <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> cursor<span class="token punctuation">.</span>value<span class="token punctuation">.</span>day <span class="token operator">+</span> daySuffix <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> cursor<span class="token punctuation">.</span>value<span class="token punctuation">.</span>year <span class="token operator">+</span> <span class="token string">'.'</span><span class="token punctuation">;</span>
          
          <span class="token keyword">if</span><span class="token punctuation">(</span>cursor<span class="token punctuation">.</span>value<span class="token punctuation">.</span>notified <span class="token operator">==</span> <span class="token string">"yes"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            listItem<span class="token punctuation">.</span>style<span class="token punctuation">.</span>textDecoration <span class="token operator">=</span> <span class="token string">"line-through"</span><span class="token punctuation">;</span>
            listItem<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">"rgba(255,0,0,0.5)"</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

         <span class="token comment" spellcheck="true"> // put the item item inside the task list
</span>          taskList<span class="token punctuation">.</span><span class="token function">appendChild<span class="token punctuation">(</span></span>listItem<span class="token punctuation">)</span><span class="token punctuation">;</span>  
          
         <span class="token comment" spellcheck="true"> // create a delete button inside each list item, giving it an event handler so that it runs the deleteButton()
</span>         <span class="token comment" spellcheck="true"> // function when clicked
</span>          <span class="token keyword">var</span> deleteButton <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement<span class="token punctuation">(</span></span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          listItem<span class="token punctuation">.</span><span class="token function">appendChild<span class="token punctuation">(</span></span>deleteButton<span class="token punctuation">)</span><span class="token punctuation">;</span>
          deleteButton<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'X'</span><span class="token punctuation">;</span>
         <span class="token comment" spellcheck="true"> // here we are setting a data attribute on our delete button to say what task we want deleted if it is clicked!
</span>          deleteButton<span class="token punctuation">.</span><span class="token function">setAttribute<span class="token punctuation">(</span></span><span class="token string">'data-task'</span><span class="token punctuation">,</span> cursor<span class="token punctuation">.</span>value<span class="token punctuation">.</span>taskTitle<span class="token punctuation">)</span><span class="token punctuation">;</span>
          deleteButton<span class="token punctuation">.</span>onclick <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">deleteItem<span class="token punctuation">(</span></span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          
         <span class="token comment" spellcheck="true"> // continue on to the next item in the cursor
</span>          cursor<span class="token punctuation">.</span><span class="token keyword">continue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
       <span class="token comment" spellcheck="true"> // if there are no more cursor items to iterate through, say so, and exit the function
</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          note<span class="token punctuation">.</span>innerHTML <span class="token operator">+</span><span class="token operator">=</span> <span class="token string">'&lt;li&gt;Entries all displayed.&lt;/li&gt;'</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span></pre> <h2 id="Specifications">Specifications</h2> <table class="standard-table"><tbody>
<tr>
<th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr>
<tr>
<td><a class="external" href="https://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html#cursor" lang="en" title="The definition of 'cursor' in that specification.">Indexed Database API</a></td> <td><span class="spec-CR">Candidate Recommendation</span></td> <td> </td> </tr>
</tbody></table><h2 id="Browser_compatibility" name="Browser_compatibility">Browser compatibility</h2>  <div id="compat-desktop"> <table class="compat-table"><tbody>
<tr>
<th>Feature</th> <th>Chrome</th> <th>Firefox (Gecko)</th> <th>Internet Explorer</th> <th>Opera</th> <th>Safari (WebKit)</th> </tr>
<tr>
<td>Basic support</td> <td>12<span class="inlineIndicator prefixBox prefixBoxInline" title="prefix">webkit</span><br> 23</td> <td>4.0 (2.0)</td> <td>10</td> <td>17</td> <td><span style="color: #f00;">Not supported</span></td> </tr>
</tbody></table>
</div> <div id="compat-mobile"> <table class="compat-table"><tbody>
<tr>
<th>Feature</th> <th>Android</th> <th>Firefox Mobile (Gecko)</th> <th>Firefox OS</th> <th>IE Phone</th> <th>Opera Mobile</th> <th>Safari Mobile</th> </tr>
<tr>
<td>Basic support</td> <td>4.4</td> <td>6.0 (6.0)</td> <td>1.0.1</td> <td>10</td> <td>17</td> <td><span style="color: #f00;">Not supported</span></td> </tr>
</tbody></table>
</div> <div class="warning"> <p>Be careful in Chrome as it still implements the old specification along the new one. Similarly it still has the prefixed <code>webkitIndexedDB</code> property even if the unprefixed <code>indexedDB</code> is present.</p> </div> <h2 id="See_also">See also</h2> <p>To learn more about various topics, see the following</p> <ul>
<li>Starting transactions: <a href="idbdatabase" title="Everything you do in IndexedDB always happens in the context of a transaction, representing interactions with data in the database. All objects in IndexedDB—including object stores, indexes, and cursors—are tied to a particular transaction. Thus, you cannot execute commands, access data, or open anything outside of a transaction."><code>IDBDatabase</code></a>
</li> <li>Setting transaction modes: <a href="idbtransaction" title="Inherits from: EventTarget"><code>IDBTransaction</code></a>
</li> <li>Setting a range of keys: <a href="idbkeyrange" title="A key range can have a single value or a range with upper and lower bounds or endpoints. If the key range has both upper and lower bounds, then it is bounded; if it has no bounds, it is unbounded. A bounded key range can either be open (the endpoints are excluded) or closed (the endpoints are included). To retrieve all keys within a certain range, you can use the following code constructs:"><code>IDBKeyRange</code></a>
</li> <li>The reference application for the examples in this reference: <a href="https://github.com/chrisdavidmills/to-do-notifications/tree/gh-pages">To-do Notifications</a> (<a href="http://chrisdavidmills.github.io/to-do-notifications/">view example live</a>.) Not every snippet appears in this example, but every example uses the same data structure and syntax, and they will make sense in the context of this example.</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/IDBCursor$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2013 Mozilla Contributors<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/IDBCursor" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/IDBCursor</a>
  </p>
</div>
</div></div>