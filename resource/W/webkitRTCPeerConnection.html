<div class="_page _mdn"><h1>RTCPeerConnection</h1><p>The RTCPeerConnection interface handles efficient streaming of data between two peers.</p> <p>An RTCPeerConnection can be target of events, therefore it implements the <a href="eventtarget" title="EventTarget is a DOM interface implemented by objects that can receive DOM events and have listeners for them."><code>EventTarget</code></a> interface.</p> <h2 id="Constructor">Constructor</h2> <p>new RTCPeerConnection(<a href="rtcconfiguration" title="The documentation about this has not yet been written; please consider contributing!"><code>RTCConfiguration</code></a>, optional <a href="mediaconstraints" title="The documentation about this has not yet been written; please consider contributing!"><code>MediaConstraints</code></a> constraints);</p> <h2 id="Properties">Properties</h2> <p><a href="rtcpeerconnection.localdescription" title="The documentation about this has not yet been written; please consider contributing!"><code>RTCPeerConnection.localDescription</code></a></p> <p>Returns a <a href="rtcsessiondescription" title="The documentation about this has not yet been written; please consider contributing!"><code>RTCSessionDescription</code></a> object for the local connection</p> <p><a href="rtcpeerconnection.remotedescription" title="The documentation about this has not yet been written; please consider contributing!"><code>RTCPeerConnection.remoteDescription</code></a></p> <p>Returns a <a href="rtcsessiondescription" title="The documentation about this has not yet been written; please consider contributing!"><code>RTCSessionDescription</code></a> object for a remote connection</p> <p><a href="rtcpeerconnection.signalingstate" title="The documentation about this has not yet been written; please consider contributing!"><code>RTCPeerConnection.signalingState</code></a></p> <p>Returns a <a href="rtcsignalingstate" title="The documentation about this has not yet been written; please consider contributing!"><code>RTCSignalingState</code></a></p> <p><a href="rtcpeerconnection.icegatheringstate" title="The documentation about this has not yet been written; please consider contributing!"><code>RTCPeerConnection.iceGatheringState</code></a></p> <p>Returns a <a href="rtcicegatheringstate" title="The documentation about this has not yet been written; please consider contributing!"><code>RTCIceGatheringState</code></a></p> <p><a href="rtcpeerconnection.iceconnectionstate" title="The documentation about this has not yet been written; please consider contributing!"><code>RTCPeerConnection.iceConnectionState</code></a></p> <p>Returns a <a href="rtcicegatheringstate" title="The documentation about this has not yet been written; please consider contributing!"><code>RTCIceGatheringState</code></a></p> <p><a href="rtcpeerconnection.onnegotiationneeded" title="The documentation about this has not yet been written; please consider contributing!"><code>RTCPeerConnection.onnegotiationneeded</code></a></p> <p><a href="rtcpeerconnection.onicecandidate" title="The documentation about this has not yet been written; please consider contributing!"><code>RTCPeerConnection.onicecandidate</code></a></p> <p><a href="rtcpeerconnection.onsignalingstatechange" title="The documentation about this has not yet been written; please consider contributing!"><code>RTCPeerConnection.onsignalingstatechange</code></a></p> <p><a href="rtcpeerconnection.onremovestream" title="The documentation about this has not yet been written; please consider contributing!"><code>RTCPeerConnection.onremovestream</code></a></p> <h2 id="Methods">Methods</h2> <h3 id="createOffer">createOffer</h3> <p>void createOffer(<a href="rtcsessiondescriptioncallback" title="The documentation about this has not yet been written; please consider contributing!"><code>RTCSessionDescriptionCallback</code></a> successCallback, <a href="rtcpeerconnectionerrorcallback" title="The documentation about this has not yet been written; please consider contributing!"><code>RTCPeerConnectionErrorCallback</code></a> failureCallback, optional <a href="mediaconstraints" title="The documentation about this has not yet been written; please consider contributing!"><code>MediaConstraints</code></a> constraints);</p> <p>Create offer generates a blob of description data to facilitate a PeerConnection to the local machine. Use this when you've got a remote Peer connection and you want to set up the local one.</p> <h4 id="Example">Example</h4> <pre class="prettyprint"><span class="pln">var pc = new PeerConnection(</span><span class="pln">);</span>
<span class="pln">pc</span><span class="pun">.</span><span class="pln">addStream</span><span class="pun">(</span><span class="pln">video</span><span class="pun">);</span>
<span class="pun">pc.</span><span class="pln">createOffer</span><span class="pun">(function </span><span class="pun">(</span><span class="pln">desc</span><span class="pun">){</span><span class="pln">
  pc</span><span class="pun">.</span><span class="pln">setLocalDescription</span><span class="pun">(</span><span class="pln">desc</span><span class="pun">, function() {
    // send the offer to a server that can negotiate with a remote client
  });</span><span class="pun">}</span></pre> <h3 id="createAnswer">createAnswer</h3> <p>void createAnswer(<a href="rtcsessiondescriptioncallback" title="The documentation about this has not yet been written; please consider contributing!"><code>RTCSessionDescriptionCallback</code></a> successCallback, <a href="rtcpeerconnectionerrorcallback" title="The documentation about this has not yet been written; please consider contributing!"><code>RTCPeerConnectionErrorCallback</code></a> failureCallback, optional <a href="mediaconstraints" title="The documentation about this has not yet been written; please consider contributing!"><code>MediaConstraints</code></a> constraints)")</p> <p>Respond to an offer sent from a remote connection.</p> <h4 id="Example">Example</h4> <pre class="line">var pc = new PeerConnection();
<span class="nx">pc</span><span class="p">.</span><span class="nx">setRemoteDescription</span><span class="p">(</span><span class="k">new</span> <span class="nx">RTCSessionDescription</span><span class="p">(</span><span class="nx">offer</span><span class="p">),</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
<span class="nx">  pc</span><span class="p">.</span><span class="nx">createAnswer</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">answer</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">pc</span><span class="p">.</span><span class="nx">setLocalDescription</span><span class="p">(</span><span class="nx">answer</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> {
<span class="p">      // send the answer to the remote connection
    })
  })
});</span></pre> <h3 id="setLocalDescription">setLocalDescription</h3> <p>setLocalDescription(<a href="rtcsessiondescription" title="The documentation about this has not yet been written; please consider contributing!"><code>RTCSessionDescription</code></a> description, <a href="voidfunction" title="The documentation about this has not yet been written; please consider contributing!"><code>VoidFunction</code></a> successCallback, <a href="rtcpeerconnectionerrorcallback" title="The documentation about this has not yet been written; please consider contributing!"><code>RTCPeerConnectionErrorCallback</code></a> failureCallback)</p> <p>Sets the local description for a peer connection.</p> <h4 id="Example">Example</h4> <pre class="prettyprint"><span class="pln">var pc = new PeerConnection(</span><span class="pln">);</span>
<span class="pln">pc</span><span class="pun">.</span><span class="pln">addStream</span><span class="pun">(</span><span class="pln">video</span><span class="pun">);</span>
<span class="pun">pc.</span><span class="pln">createOffer</span><span class="pun">(function </span><span class="pun">(</span><span class="pln">desc</span><span class="pun">){</span><span class="pln">
  pc</span><span class="pun">.</span><span class="pln">setLocalDescription</span><span class="pun">(</span><span class="pln">desc</span><span class="pun">, function() {
    // send the offer to a server that can negotiate with a remote client
  });</span><span class="pun">}</span></pre> <h3 id="setRemoteDescription">setRemoteDescription</h3> <p>setRmoteDescription(<a href="rtcsessiondescription" title="The documentation about this has not yet been written; please consider contributing!"><code>RTCSessionDescription</code></a> description, <a href="voidfunction" title="The documentation about this has not yet been written; please consider contributing!"><code>VoidFunction</code></a> successCallback, <a href="rtcpeerconnectionerrorcallback" title="The documentation about this has not yet been written; please consider contributing!"><code>RTCPeerConnectionErrorCallback</code></a> failureCallback)</p> <p>Sets the local description for a peer connection.</p> <h4 id="Example">Example</h4> <pre class="line">var pc = new PeerConnection();
<span class="nx">pc</span><span class="p">.</span><span class="nx">setRemoteDescription</span><span class="p">(</span><span class="k">new</span> <span class="nx">RTCSessionDescription</span><span class="p">(</span><span class="nx">offer</span><span class="p">),</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
<span class="nx">  pc</span><span class="p">.</span><span class="nx">createAnswer</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">answer</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">pc</span><span class="p">.</span><span class="nx">setLocalDescription</span><span class="p">(</span><span class="nx">answer</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> {
<span class="p">      // send the answer to the remote connection
    })
  })
});</span></pre> <h3 id="updateIce()">updateIce()</h3> <p>updateIce(optional <a href="rtcconfiguration" title="The documentation about this has not yet been written; please consider contributing!"><code>RTCConfiguration</code></a> configuration, optional <a href="mediaconstraints" title="The documentation about this has not yet been written; please consider contributing!"><code>MediaConstraints</code></a> constraints)</p> <h4 id="Example">Example</h4>  <h3 id="addIceCandidate()">addIceCandidate()</h3> <p>addIceCandidate (<a href="rtcicecandidate" title="The documentation about this has not yet been written; please consider contributing!"><code>RTCIceCandidate</code></a> candidate, <a href="voidfunction" title="The documentation about this has not yet been written; please consider contributing!"><code>VoidFunction</code></a> successCallback, <a href="rtcpeerconnectionerrorcallback" title="The documentation about this has not yet been written; please consider contributing!"><code>RTCPeerConnectionErrorCallback</code></a> failureCallback);</p> <p>The addIceCandidate() method provides a remote candidate to the ICE Agent. In addition to being added to the remote description, connectivity checks will be sent to the new candidates as long as the "IceTransports" constraint is not set to "none". This call will result in a change to the connection state of the ICE Agent, and may result in a change to media state if it results in different connectivity being established.</p> <h4 id="Example">Example</h4> <pre>  pc.addIceCandidate(new RTCIceCandidate(candidate));
</pre> <h3 id="getLocalStreams()">getLocalStreams()</h3> <p><a href="mediastream" title="The MediaStream interface represents a stream of media content. A stream consists of several tracks, like video or audio tracks."><code>MediaStream</code></a>[] getLocalStreams()</p> <p>Returns a sequence of <a href="mediastream" title="The MediaStream interface represents a stream of media content. A stream consists of several tracks, like video or audio tracks."><code>MediaStream</code></a> objects representing the streams that are currently sent with this <a href="rtcpeerconnection" title="The RTCPeerConnection interface handles efficient streaming of data between two peers."><code>RTCPeerConnection</code></a> object.</p> <h3 id="getRemoteStreams()">getRemoteStreams()</h3> <p><a href="mediastream" title="The MediaStream interface represents a stream of media content. A stream consists of several tracks, like video or audio tracks."><code>MediaStream</code></a>[] getRemoteStreams()</p> <p>Returns a sequence of <a href="mediastream" title="The MediaStream interface represents a stream of media content. A stream consists of several tracks, like video or audio tracks."><code>MediaStream</code></a> objects representing the streams that are received by this <a href="rtcpeerconnection" title="The RTCPeerConnection interface handles efficient streaming of data between two peers."><code>RTCPeerConnection</code></a> object.</p> <h3 id="getStreamById()">getStreamById()</h3> <p><a href="mediastream" title="The MediaStream interface represents a stream of media content. A stream consists of several tracks, like video or audio tracks."><code>MediaStream</code></a> getStreamById(DOMString streamId)</p> <p>Returns a <a href="mediastream" title="The MediaStream interface represents a stream of media content. A stream consists of several tracks, like video or audio tracks."><code>MediaStream</code></a> object, whose id is equal to trackId, if it exists in this <a href="rtcpeerconnection" title="The RTCPeerConnection interface handles efficient streaming of data between two peers."><code>RTCPeerConnection</code></a> object’s stream sets (local streams set or remote streams). Return null otherwise.</p> <h3 id="addStream()">addStream()</h3> <p>void addStream (MediaStream stream, optional <a href="mediaconstraints" title="The documentation about this has not yet been written; please consider contributing!"><code>MediaConstraints</code></a> constraints);</p> <p>Adds a stream to this peer connection</p> <h4 id="Example">Example</h4> <pre>navigator.getUserMedia({video:true, audio:true}, function(stream) {
  var pc = new RTCPeerConnection();
  pc.addStream(stream);
});
</pre> <h3 id="removeStream()">removeStream()</h3> <p>void removeStream (<a href="mediaconstraints" title="The documentation about this has not yet been written; please consider contributing!"><code>MediaConstraints</code></a> stream);</p> <p>Removes a stream from this peer connection</p> <h4 id="Example">Example</h4>  <h3 id="close()">close()</h3> <p>close()</p> <p>Close the current peer connection. This should be called when you're ending your session.</p> <h4 id="Example">Example</h4> <pre>  pc.close()
</pre> <h2 id="Other_reading">Other reading</h2> <ul>
<li>https://github.com/jesup/nightly-gupshup/blob/master/static/js/chat.js</li> <li>http://www.html5rocks.com/en/tutorials/webrtc/basics/#toc-simple</li> <li>http://dev.w3.org/2011/webrtc/editor/webrtc.html</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2013 Mozilla Contributors<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection</a>
  </p>
</div>
</div>