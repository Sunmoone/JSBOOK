<div id="content" class="content mod-cs-content text-content clearfix"> IE中的 XPath 支持<br>&nbsp;&nbsp;&nbsp;  微软获取匹配的XPath模式的的节点的方法又两个：<br>&nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;&nbsp;  1.  selectNodes（） 用于匹配某个模式的集合。如果发现又匹配的节点，返回NodeList；如果为空，则它的length属性值为0。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  2.  selectSingleNode() 用于匹配给定模式的第一个节点。如果发现了节点，则返回一个Element；如果没有发现，则它返回null。<br>&nbsp;&nbsp;&nbsp;  <br>&nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;&nbsp;  var lstNodes = oXmlDom.documentElement.selectNodes("employee/name");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  for(var i=0;i&lt;lstNodes.length;i++)<br>&nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;&nbsp;  {<br>&nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;   &nbsp;&nbsp;   &nbsp;&nbsp;   alert(lstNodes[i]);<br>&nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;&nbsp;  }<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  var oElement = oXmlDom.documentElement.selectSingleNode("employee/name");<br><br><br>  Mozilla 中的 XPath支持 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  Mozilla并没有直接实现XPath，不过有很多与XPath相关的对象，最重要的两个是： XPathEvaluator 和  XPathResult。XPathEvaluator利用方法evaluate（）计算XPath表达式<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  ORDERED_NODE_ITERATOR_TYPE，它是最常用的结果类型，返回匹配节点的节点集合，如果没有匹配节点，evaluate()返回null<br> <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  FIRST_ORDERED_NODE_TYPE结果返回第一个匹配节点，可通过singeNodeValue特性来访问<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  1.  模仿IE的selectNodes()方法<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  Element.prototype.selectNodes = function(sXPath）<br>&nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;   &nbsp;&nbsp;     {<br>&nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;   &nbsp;&nbsp;   &nbsp;&nbsp;   &nbsp;&nbsp;   var oEvaluator = new XPathEvaluator();<br>&nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;   &nbsp;&nbsp;   &nbsp;&nbsp;   &nbsp;&nbsp;   var oResult = &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  oEvaluator.evaluate(sXPath,this,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  var aNodes = new Array;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  if(oResult != null)<br>&nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;   &nbsp;&nbsp;   &nbsp;&nbsp;   &nbsp;&nbsp;   {<br>&nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;   &nbsp;&nbsp;   &nbsp;&nbsp;   &nbsp;&nbsp;   &nbsp;&nbsp;   var oElement = oResult.iterateNext();<br>&nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;   &nbsp;&nbsp;   &nbsp;&nbsp;   &nbsp;&nbsp;   &nbsp;&nbsp;   while(oElement)<br>&nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;   &nbsp;&nbsp;   &nbsp;&nbsp;   &nbsp;&nbsp;   &nbsp;&nbsp;   {<br>&nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;   &nbsp;&nbsp;   &nbsp;&nbsp;   &nbsp;&nbsp;   &nbsp;&nbsp;   &nbsp;&nbsp;&nbsp;  aNodes.push(oElement);<br>                    &nbsp;&nbsp;  oElement = oResult.iterateNext();    <br>&nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;  }<br>&nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;&nbsp;  }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  return aNodes;<br>&nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;&nbsp;  }<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  2.  又了selectNodes，下面来仿写selectSingleNode（）方法<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  Element.prototype.selectSingleNode = function(sXPath)<br>&nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;  &nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;  {<br>&nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;   &nbsp;&nbsp;   &nbsp;&nbsp;   &nbsp;&nbsp;   &nbsp;&nbsp;   var oEvaluator = new XPathEvaluator();<br>&nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;  &nbsp;&nbsp;  &nbsp;&nbsp;  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  var oResult = &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  oEvaluator.evaluate(sXPath,this,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  if(oResult != null)<br>&nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;   &nbsp;&nbsp;   &nbsp;&nbsp;   &nbsp;&nbsp;   &nbsp;&nbsp;   {<br>&nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;   &nbsp;&nbsp;   &nbsp;&nbsp;   &nbsp;&nbsp;   &nbsp;&nbsp;   &nbsp;&nbsp;   &nbsp;&nbsp;   return oResult.singleNodeValue;<br>&nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;  }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  else<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  {<br>&nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;   &nbsp;&nbsp;   &nbsp;&nbsp;   &nbsp;&nbsp;   &nbsp;&nbsp;   &nbsp;&nbsp;   &nbsp;&nbsp;  return null;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  } &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div>